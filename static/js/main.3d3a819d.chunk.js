(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{56:function(e,t,n){e.exports=n(94)},61:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){e.exports=n.p+"static/media/port.1b33f6c1.svg"},71:function(e,t,n){e.exports=n.p+"static/media/knob.23f417df.svg"},72:function(e,t,n){var o={"./pulse.svg":73,"./sawtooth.svg":74,"./sine.svg":75,"./triangle.svg":76};function a(e){var t=r(e);return n(t)}function r(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=72},73:function(e,t,n){e.exports=n.p+"static/media/pulse.f9689bc2.svg"},74:function(e,t,n){e.exports=n.p+"static/media/sawtooth.de511017.svg"},75:function(e,t,n){e.exports=n.p+"static/media/sine.e1994103.svg"},76:function(e,t,n){e.exports=n.p+"static/media/triangle.87d20148.svg"},84:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){e.exports=n.p+"static/media/screw_header.2c2805d6.svg"},92:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(50),c=n.n(r),i=(n(61),n(9)),u=n(10),l=n(12),d=n(11),s=n(13),p=n(8),h=n(30),m=n(53),f=n(6),v=n(114),b=n(37),y=n(77),O=n(33),g=n(5),I=n(2),C=n(100),E=n(115),w=n(21),j=n(95),_=n(46),M=n(97),T=n(98),k=n(118),D=function(e){return{type:"ADD_CABLE",portId:e.portId,fromPoint:e.fromPoint,color:e.color}},P=function(e){return{type:"MODIFY_CABLE",portId:e.portId,fromPoint:e.fromPoint,toPoint:e.toPoint,toPortId:e.toPortId}},A=function(e){return{type:"REMOVE_CABLE",portId:e}},x=function(e,t,n){return{type:"ADD_MODULE",moduleType:e,id:t,rackId:n}},S=function(e){return{type:"CONNECT_MODULES",output:e.output,input:e.input}},R=function(e){return{type:"DISCONNECT_MODULE",port:e}},V=function(e,t){return{type:"REGISTER_INPUTS",id:e,inputs:t}},N=function(e,t){return{type:"REGISTER_OUTPUTS",id:e,outputs:t}},F=function(){return{type:"UNSET_STARTING_PORT"}},L=function(e){return function(t,n){console.log("remove module",e);var o=n(),a=o.modules,r=a.modules,c=a.connections,i=o.cables.cables,u=r[e];if(u){var l=E.a(w.a,j.a(function(t){return _.a([e,t],c)}),M.a(function(n){t(R({moduleId:e,portId:n}));var o="".concat(e,"-").concat(n);i[o]||(o=E.a(j.a(T.a("toPortId",o)),w.a,k.a)(i)),t(A(o))}));u.inputs&&l(u.inputs),u.outputs&&l(u.outputs),t({type:"REMOVE_MODULE",moduleId:e})}}},U=n(119),B=n(120),q=n(99),G=n(55),K=n.n(G),W=n(47),Y=n.n(W),Q=(n(68),"ABOVE"),z="BELOW",H=Object(p.b)(function(e,t){var n=e.modules,o=e.cables;return{startingPort:n.startingPort,connection:n.connections[t.moduleId][t.portId],cables:q.a(o.cables)}},{connectModules:S,disconnectModule:R,setStartingPort:function(e){return{type:"SET_STARTING_PORT",port:e}},unsetStartingPort:F,addCable:D,removeCable:A,modifyCable:P})(function(e){var t,r=e.label,c=e.labelPosition,i=void 0===c?Q:c,u=e.portId,l=e.connection,d=e.connectModules,s=e.disconnectModule,p=e.moduleId,h=e.portType,m=e.startingPort,v=e.setStartingPort,b=e.unsetStartingPort,y=e.addCable,O=e.removeCable,g=e.modifyCable,I=e.cables;Object(o.useEffect)(function(){var e=U.a(B.a({portId:"".concat(p,"-").concat(u)}),I);if(e){var n=t.getBoundingClientRect(),o=n.x,a=n.y,r=n.width,c=n.height;g({portId:e.portId,fromPoint:{x:o+r/2,y:a+c/2}})}else{var i=U.a(B.a({toPortId:"".concat(p,"-").concat(u)}),I);if(i){var l=t.getBoundingClientRect(),d=l.x,s=l.y,h=l.width,m=l.height;g({portId:i.portId,toPoint:{x:d+h/2,y:s+m/2}})}}},[l]);var C=r||u;return a.a.createElement("div",{className:K()("port",{disabled:m&&m.portType===h}),onMouseDown:function(e){e.stopPropagation();var n={portId:u,portType:h,moduleId:p};l&&(s({moduleId:p,portId:u}),O("".concat(l.moduleId,"-").concat(l.portId))),v(n);var o=t.getBoundingClientRect(),a=o.x,r=o.y,c=o.width,i=o.height;y({portId:"".concat(p,"-").concat(u),fromPoint:{x:a+c/2,y:r+i/2},color:Y()({luminosity:"dark"})})},onMouseUp:function(e){var n;if(b(),m&&m.portType!==h&&(m.moduleId!==p||m.id!==u)){e.stopPropagation();var o=t.getBoundingClientRect(),a=o.x,r=o.y,c=o.width,i=o.height;!l||l.moduleId===m.moduleId&&l.portId===m.portId||(O("".concat(l.moduleId,"-").concat(l.portId)),O("".concat(p,"-").concat(u))),g({portId:"".concat(m.moduleId,"-").concat(m.portId),toPoint:{x:a+c/2,y:r+i/2},toPortId:"".concat(p,"-").concat(u)}),d((n={},Object(f.a)(n,m.portType,m),Object(f.a)(n,h,{moduleId:p,portId:u}),n))}}},i===Q&&C,a.a.createElement("img",{id:"".concat(p,"-").concat(u),height:"30",width:"30",ref:function(e){return t=e},onMouseDown:function(e){return e.preventDefault()},src:n(70),alt:"".concat(p,"-").concat(u)}),i===z&&C)}),X=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleMouseMove=n.handleMouseMove.bind(Object(g.a)(n)),n.handleMouseDown=n.handleMouseDown.bind(Object(g.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(g.a)(n)),n.calculateValueAngle=n.calculateValueAngle.bind(Object(g.a)(n)),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)}},{key:"handleMouseMove",value:function(e){var t=this.props,n=t.isMoving,o=t.onChange,a=t.max,r=t.min,c=t.step;if(n&&(e.stopPropagation(),e.preventDefault(),1===e.buttons)){var i=this._elem.getBoundingClientRect(),u=i.x,l=i.y,d=u+i.width/2,s=l+i.height/2,p=e.clientX-d,h=e.clientY-s,m=180*Math.atan2(h,p)/Math.PI;m<0&&(m+=360),(m-=120)<0&&(m+=360),m>315&&(m=0);var f=m/300*(a-r)+r;(f=Math.floor(f/c)*c)>a&&(f=a),o(f)}}},{key:"handleMouseDown",value:function(e){e.stopPropagation(),this.props.setIsMoving(!0)}},{key:"handleMouseUp",value:function(){this.props.setIsMoving(!1)}},{key:"calculateValueAngle",value:function(){var e=this.props,t=e.min,n=e.max;return 2*((e.value-t)/(n-t))*150}},{key:"render",value:function(){var e=this,t=this.props,o=t.label,r=t.height,c=void 0===r?50:r,i=t.width,u=void 0===i?50:i;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o,a.a.createElement("img",{ref:function(t){e._elem=t},style:{cursor:"pointer",margin:"auto",transform:"rotate(".concat(this.calculateValueAngle(),"deg)")},onMouseDown:this.handleMouseDown,alt:"knob",src:n(71),height:c,width:u}))}}]),t}(o.Component),J=Object(I.a)(Object(I.c)("isMoving","setIsMoving",!1))(X),$={container:{display:"flex",flexDirection:"column",height:"100%"},body:{display:"flex",flexDirection:"column",flex:1,justifyContent:"space-evenly"},spaceAround:{display:"flex",justifyContent:"space-around"}},Z=function(e,t){var n=e.createOscillator();return n.type=t,n.frequency.value=0,n},ee=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e));var o=e.audioContext;if(!o)throw new Error("audioContext property must be provided");var a=o.createPulseOscillator();return a.frequency.value=0,a.width.value=0,n._oscillators={Sawtooth:Z(o,"sawtooth"),Pulse:a,Triangle:Z(o,"triangle"),Sine:Z(o,"sine")},window.pulse=n._oscillators.Pulse,window["sine"+e.id]=n._oscillators.Sine,n._frequencyControl=o.createVoltToHzConverter(440,2),n._detuneControl=o.createConstantSource(),n._frequencyControl.volt.value=0,n._detuneControl.offset.value=0,n._fmGain=o.createGain(),n._fmGain.gain.value=0,n._fmGain.connect(n._frequencyControl.volt),C.a(function(e){return n._frequencyControl.connect(e.frequency)})(n._oscillators),C.a(function(e){return n._detuneControl.connect(e.detune)})(n._oscillators),n._pwCvGain=o.createGain(),n._pwCvGain.gain.value=0,n._pwCvGain.connect(n._oscillators.Pulse.width),window.pwm=n._pwCvGain,n.handleFrequencyChange=n.handleFrequencyChange.bind(Object(g.a)(n)),n.handleTuneChange=n.handleTuneChange.bind(Object(g.a)(n)),n.handlePwChange=n.handlePwChange.bind(Object(g.a)(n)),n.handlePwmCvChange=n.handlePwmCvChange.bind(Object(g.a)(n)),n.handleFmCvChange=n.handleFmCvChange.bind(Object(g.a)(n)),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;this.startNodes(),o(n,{"V/Oct":{connect:function(t){return t.connect(e._frequencyControl.volt)},disconnect:function(t){return t.disconnect(e._frequencyControl.volt)}},PWM:{connect:function(t){return t.connect(e._pwCvGain)},disconnect:function(t){return t.disconnect(e._pwCvGain)}},FM:{connect:function(t){return t.connect(e._fmGain)},disconnect:function(t){return t.disconnect(e._fmGain)}}}),a(n,{Sawtooth:this._oscillators.Sawtooth,Pulse:this._oscillators.Pulse,Triangle:this._oscillators.Triangle,Sine:this._oscillators.Sine})}},{key:"handleFrequencyChange",value:function(e){this.props.setFrequency(e),this._frequencyControl.offset.value=e}},{key:"handleTuneChange",value:function(e){this.props.setTune(e),this._detuneControl.offset.value=e}},{key:"handlePwChange",value:function(e){this.props.setPw(e),this._oscillators.Pulse.width.value=e}},{key:"handlePwmCvChange",value:function(e){this.props.setPwmCv(e),this._pwCvGain.gain.value=e/10}},{key:"handleFmCvChange",value:function(e){this.props.setFmCv(e),this._fmGain.gain.value=e}},{key:"startNodes",value:function(){C.a(function(e){return e.start()})(this._oscillators),this._frequencyControl.start(),this._detuneControl.start()}},{key:"render",value:function(){var e=this.props,t=e.id,o=e.frequency,r=e.tune,c=e.pw,i=e.pwmCv,u=e.fmCv;return a.a.createElement("div",{style:$.container},a.a.createElement("span",null,"VCO"),a.a.createElement("div",{style:Object(O.a)({},$.body,{justifyContent:"space-between"})},a.a.createElement("div",{style:$.spaceAround},a.a.createElement("div",{style:Object(O.a)({},$.spaceAround,{flexDirection:"column"})},a.a.createElement(H,{portId:"V/Oct",moduleId:t,portType:"input"}),a.a.createElement(H,{portId:"FM",moduleId:t,portType:"input"}),a.a.createElement(H,{portId:"PWM",moduleId:t,portType:"input"})),a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(J,{label:"Range",min:-2,max:2,step:.001,value:o,width:30,height:30,onChange:this.handleFrequencyChange}),a.a.createElement(J,{label:"Tune",min:-600,max:600,step:1,value:r,width:30,height:30,onChange:this.handleTuneChange}),a.a.createElement(J,{label:"FM CV",min:0,max:1,step:.005,value:u,width:30,height:30,onChange:this.handleFmCvChange}),a.a.createElement(J,{label:"PW",min:-1,max:1,step:.001,value:c,width:30,height:30,onChange:this.handlePwChange}),a.a.createElement(J,{label:"PWM CV",min:0,max:1,step:.005,value:i,width:30,height:30,onChange:this.handlePwmCvChange}))),a.a.createElement("div",{style:$.spaceAround},E.a(w.a,b.a(function(e){return a.a.createElement(H,{key:e,label:a.a.createElement("img",{width:25,src:n(72)("./".concat(e.toLowerCase(),".svg")),alt:e}),labelPosition:z,portId:e,moduleId:t,portType:"output"})}))(this._oscillators))))}}]),t}(o.Component),te=Object(I.a)(Object(I.b)("isBrowserSupported","undefined"!==typeof OscillatorNode&&"undefined"!==typeof ConstantSourceNode),Object(I.b)("panelWidth",8),Object(I.c)("frequency","setFrequency",0),Object(I.c)("tune","setTune",0),Object(I.c)("pw","setPw",0),Object(I.c)("pwmCv","setPwmCv",0),Object(I.c)("fmCv","setFmCv",0),Object(I.c)("vOct","setVOct",0),Object(p.b)(null,{connectModules:S,registerInputs:V,registerOutputs:N}))(ee),ne=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._leftPanner=new StereoPannerNode(e.audioContext,{pan:-1}),n._rightPanner=new StereoPannerNode(e.audioContext,{pan:1}),n._leftPanner.connect(e.audioContext.destination),n._rightPanner.connect(e.audioContext.destination),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id;(0,t.registerInputs)(n,{Left:{connect:function(t){return t.connect(e._leftPanner)},disconnect:function(t){return t.disconnect(e._leftPanner)}},Right:{connect:function(t){return t.connect(e._rightPanner)},disconnect:function(t){return t.disconnect(e._rightPanner)}}})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:$.container},a.a.createElement("span",null,"Stereo"),a.a.createElement("div",{style:$.body},a.a.createElement(H,{portId:"Left",connections:n,moduleId:t,portType:"input"}),a.a.createElement(H,{portId:"Right",connections:n,moduleId:t,portType:"input"})))}}]),t}(o.Component),oe=Object(I.a)(Object(I.b)("isBrowserSupported","undefined"!==typeof StereoPannerNode),Object(I.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:S,registerInputs:V}))(ne),ae=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id;(0,t.registerInputs)(n,{In:{connect:function(t){return t.connect(e.props.audioContext.destination)},disconnect:function(t){return t.disconnect(e.props.audioContext.destination)}}})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:$.container},a.a.createElement("span",null,"Mono"),a.a.createElement("div",{style:$.body},a.a.createElement(H,{portId:"In",connections:n,moduleId:t,portType:"input"})))}}]),t}(o.Component),re=Object(I.a)(Object(I.b)("isBrowserSupported",!0),Object(I.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:S,registerInputs:V}))(ae),ce=n(101),ie=[90,83,88,68,67,86,71,66,72,78,74,77,188],ue=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C"],le={"C#":"1/4","D#":"3/6","F#":"6/9","G#":"8/11","A#":"10/13"},de=function(e,t){return t-5+(e+3)/12},se=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._gate=e.audioContext.createConstantSource(),n._gate.offset.value=0,n._gate.start(),n._cv=e.audioContext.createConstantSource(),n._cv.offset.value=0,n._cv.start(),n.handleKeyDown=n.handleKeyDown.bind(Object(g.a)(n)),n.handleKeyUp=n.handleKeyUp.bind(Object(g.a)(n)),n.handleOctaveChange=n.handleOctaveChange.bind(Object(g.a)(n)),n.handleKeyboardDown=n.handleKeyboardDown.bind(Object(g.a)(n)),n.handleKeyboardUp=n.handleKeyboardUp.bind(Object(g.a)(n)),n._keyboardDown=!1,n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id;(0,e.registerOutputs)(t,{CV:this._cv,Gate:this._gate}),document.addEventListener("keydown",this.handleKeyboardDown),document.addEventListener("keyup",this.handleKeyboardUp)}},{key:"handleKeyboardDown",value:function(e){var t=ce.a(e.keyCode,ie);this._keyboardDown||-1===t||(this._keyboardDown=!0,this.handleKeyDown(de(t,this.props.octave)))}},{key:"handleKeyboardUp",value:function(){this._keyboardDown=!1,this.handleKeyUp()}},{key:"handleKeyDown",value:function(e){this.changeFrequency(e),this._gate.offset.value=1}},{key:"handleKeyUp",value:function(){this._gate.offset.value=0}},{key:"handleOctaveChange",value:function(e){var t=e.target.value,n=this.props,o=n.setOctave,a=n.octave,r=Number(t),c=this._cv.offset.value;this.changeFrequency(c+r-a),o(r)}},{key:"changeFrequency",value:function(e){this._cv.offset.value=e}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.connections,r=t.octave;return a.a.createElement("div",{style:$.container},a.a.createElement("span",null,"\xb5Keyboard"),a.a.createElement("div",{style:$.body},"Octave",a.a.createElement("select",{value:r,onChange:this.handleOctaveChange},a.a.createElement("option",{value:2},"-2"),a.a.createElement("option",{value:3},"-1"),a.a.createElement("option",{value:4},"0"),a.a.createElement("option",{value:5},"+1"),a.a.createElement("option",{value:6},"+2")),a.a.createElement("div",{style:{display:"grid",flex:1}},ue.map(function(t,n){var o=t.endsWith("#"),c=o?le[t]:n+1;return[a.a.createElement("div",{key:"TITLE_".concat(t).concat(n),style:{alignSelf:"center",gridRow:c,gridColumn:o?4:1}},t),a.a.createElement("button",{key:"".concat(t).concat(n),onMouseDown:function(t){t.stopPropagation(),e.handleKeyDown(de(n,r))},onMouseUp:e.handleKeyUp,style:{height:20,width:20,gridRow:c,alignSelf:"center",gridColumn:o?3:2,backgroundColor:o?"black":"white"}})]})),a.a.createElement("div",{style:$.spaceAround},a.a.createElement(H,{portId:"CV",connections:o,moduleId:n,portType:"output"}),a.a.createElement(H,{portId:"Gate",connections:o,moduleId:n,portType:"output"}))))}}]),t}(o.Component),pe=Object(I.a)(Object(I.b)("isBrowserSupported","undefined"!==typeof ConstantSourceNode),Object(I.b)("panelWidth",6),Object(I.c)("octave","setOctave",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:S,registerOutputs:N}))(se);for(var he,me,fe,ve=function(e){return 15*Math.pow(e,4)+.001},be=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._adsr=e.audioContext.createConstantSource(),n._adsr.offset.value=0,n.handleGateInChange=n.handleGateInChange.bind(Object(g.a)(n)),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;this._adsr.start(),o(n,{Gate:{connect:function(t){return e._gateInterval=function(e,t){var n=null,o=function(o){if(e[o]instanceof AudioParam){var a=e[o].value;return t(a),n=setInterval(function(){a!==e[o].value&&(a=e[o].value,t(a))},0),"break"}};for(var a in e)if("break"===o(a))break;return n}(t,e.handleGateInChange)},disconnect:function(){e._gateInterval&&(clearInterval(e._gateInterval),e._gateInterval=null)}}}),a(n,{Out:this._adsr})}},{key:"handleGateInChange",value:function(e){var t=this.props,n=t.sustain,o=t.audioContext,a=ve(this.props.attack),r=ve(this.props.decay),c=ve(this.props.release),i=o.currentTime,u=this._adsr.offset;1===e?(u.cancelScheduledValues(0),u.linearRampToValueAtTime(0,i+.01),u.linearRampToValueAtTime(1,i+a),u.linearRampToValueAtTime(n,i+a+r)):0===e&&(u.cancelScheduledValues(0),u.setValueAtTime(u.value,i),u.linearRampToValueAtTime(0,i+c))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections,o=e.attack,r=e.setAttack,c=e.decay,i=e.setDecay,u=e.sustain,l=e.setSustain,d=e.release,s=e.setRelease;return a.a.createElement("div",{style:$.container},a.a.createElement("span",null,"ADSR"),a.a.createElement("div",{style:$.body},"Attack:",a.a.createElement(J,{min:0,max:1,step:.001,value:o,onChange:function(e){return r(e)},width:30,height:30}),"Decay:",a.a.createElement(J,{min:0,max:1,step:.001,value:c,onChange:function(e){return i(e)},width:30,height:30}),"Sustain:",a.a.createElement(J,{min:0,max:1,step:.01,value:u,onChange:function(e){return l(Number(e))},width:30,height:30}),"Release:",a.a.createElement(J,{min:0,max:1,step:.001,value:d,onChange:function(e){return s(Number(e))},width:30,height:30}),a.a.createElement("div",{style:$.spaceAround},a.a.createElement(H,{portId:"Gate",connections:n,moduleId:t,portType:"input"}),a.a.createElement(H,{portId:"Out",connections:n,moduleId:t,portType:"output"}))))}}]),t}(o.Component),ye=Object(I.a)(Object(I.b)("isBrowserSupported","undefined"!==typeof ConstantSourceNode),Object(I.b)("panelWidth",6),Object(I.c)("attack","setAttack",.5),Object(I.c)("decay","setDecay",.5),Object(I.c)("sustain","setSustain",.5),Object(I.c)("release","setRelease",.5),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:S,registerInputs:V,registerOutputs:N}))(be),Oe=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._gain=e.audioContext.createGain(),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs,r=t.audioContext;o(n,{In:{connect:function(t){return t.connect(e._gain)},disconnect:function(t){return t.disconnect(e._gain)}},CV:{connect:function(t){e._gain.gain.linearRampToValueAtTime(0,r.currentTime+.01),t.connect(e._gain.gain)},disconnect:function(t){e._gain.gain.linearRampToValueAtTime(1,r.currentTime+.01),t.disconnect(e._gain.gain),t.offset&&(t.offset.value=0)}}}),a(n,{Out:this._gain})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:$.container},a.a.createElement("span",null,"VCA"),a.a.createElement("div",{style:$.body},a.a.createElement(H,{portId:"In",connections:n,moduleId:t,portType:"input"}),a.a.createElement(H,{portId:"CV",connections:n,moduleId:t,portType:"input"}),a.a.createElement(H,{portId:"Out",connections:n,moduleId:t,portType:"output"})))}}]),t}(o.Component),ge=Object(I.a)(Object(I.b)("isBrowserSupported","undefined"!==typeof GainNode),Object(I.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:S,registerInputs:V,registerOutputs:N}))(Oe),Ie=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._vcf=e.audioContext.createBiquadFilter(),n._vcf.type="lowpass",n._vcf.Q.value=.5,n.handleFrequencyChange=n.handleFrequencyChange.bind(Object(g.a)(n)),n.handleTypeChange=n.handleTypeChange.bind(Object(g.a)(n)),n.setPitch=n.setPitch.bind(Object(g.a)(n)),n.handleQChange=n.handleQChange.bind(Object(g.a)(n)),n.setQuality=n.setQuality.bind(Object(g.a)(n)),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;o(n,{In:{connect:function(t){return t.connect(e._vcf)},disconnect:function(t){return t.disconnect(e._vcf)}}}),a(n,{Out:this._vcf})}},{key:"handleFrequencyChange",value:function(e){this.props.setFrequency(Number(e),this.setPitch)}},{key:"setPitch",value:function(){var e=this.props,t=e.frequency,n=e.audioContext,o=n.sampleRate/2,a=Math.log(o/40)/Math.LN2,r=Math.pow(2,a*(t-1));this._vcf.frequency.setValueAtTime(o*r,n.currentTime)}},{key:"handleQChange",value:function(e){this.props.setQ(Number(e),this.setQuality)}},{key:"handleTypeChange",value:function(e){var t=e.target.value;this.props.setType(t),this._vcf.type=t}},{key:"setQuality",value:function(){var e=this.props.q;this._vcf.Q.value=30*e}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.connections,r=t.type,c=t.frequency,i=t.q;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"VCF"),"Shape:",a.a.createElement("select",{value:r,onChange:this.handleTypeChange},a.a.createElement("option",{value:"lowpass"},"Low Pass"),a.a.createElement("option",{value:"highpass"},"High Pass")),"Frequency:",a.a.createElement(J,{min:0,max:1,step:.01,value:c,onChange:function(t){return e.handleFrequencyChange(t)}}),"Q:",a.a.createElement(J,{min:0,max:1,step:.01,value:i,onChange:function(t){return e.handleQChange(t)}}),a.a.createElement(H,{portId:"In",connections:o,moduleId:n,portType:"input"}),a.a.createElement(H,{portId:"Out",connections:o,moduleId:n,portType:"output"}))}}]),t}(o.Component),Ce=Object(I.a)(Object(I.b)("isBrowserSupported","undefined"!==typeof BiquadFilterNode),Object(I.b)("panelWidth",6),Object(I.c)("type","setType","lowpass"),Object(I.c)("frequency","setFrequency",.1),Object(I.c)("q","setQ",.5),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:S,registerInputs:V,registerOutputs:N}))(Ie),Ee={VCO:"VCO",STEREO_AUDIO_INTERFACE:"STEREO_AUDIO_INTERFACE",MONO_AUDIO_INTERFACE:"MONO_AUDIO_INTERFACE",KEYBOARD:"KEYBOARD",ADSR:"ADSR",VCA:"VCA",VCF:"VCF"},we=b.a(y.a(1))(Ee),je=n(102),_e=n(103),Me=n(104),Te=n(116),ke=n(105),De=n(117),Pe=n(106),Ae=n(80),xe=n(81),Se=n(79),Re=n(107),Ve=n(78),Ne=n(121),Fe=n(108),Le=n(109),Ue=n(122),Be=n(123),qe=n(110),Ge=je.a(function(e,t){var n=e.moduleId,o=e.portId;return _e.a(Me.a(Te.a(ke.a),[n,o]),E.a(_.a([n,o]),function(e){return De.a([e.moduleId,e.portId],t)}))(t)}),Ke=Object(v.a)((he={},Object(f.a)(he,"ADD_MODULE",function(e,t){var n=t.moduleType,o=t.id,a=t.rackId,r=void 0===a?0:a,c=function(e){var t=e.type,n=e.id,o={id:(void 0===n?void 0:n)||"".concat(t).concat(we[t])};switch(t){case Ee.VCO:o.Module=te;break;case Ee.STEREO_AUDIO_INTERFACE:o.Module=oe;break;case Ee.MONO_AUDIO_INTERFACE:o.Module=re;break;case Ee.KEYBOARD:o.Module=pe;break;case Ee.ADSR:o.Module=ye;break;case Ee.VCF:o.Module=Ce;break;case Ee.VCA:o.Module=ge;break;default:throw new Error("Cannot create module of type: ".concat(t))}return o.Module.isBrowserSupported?(o.width=20*o.Module.panelWidth,we[t]++,o):null}({type:n,id:o});return c?(c.left=e.maxLeft,Pe.a({modules:Ae.a(c.id,c),connections:Ae.a(c.id,{}),maxLeft:xe.a(c.width),racks:Se.a(r,Re.a(c.id))})(e)):(window.alert("Your browser doesn't support this module: ".concat(n)),e)}),Object(f.a)(he,"REGISTER_INPUTS",function(e,t){var n=t.id,o=t.inputs;return Pe.a({modules:Pe.a(Object(f.a)({},n,Ae.a("inputs",o)))})(e)}),Object(f.a)(he,"REGISTER_OUTPUTS",function(e,t){var n=t.id,o=t.outputs;return Pe.a({modules:Pe.a(Object(f.a)({},n,Ae.a("outputs",o)))})(e)}),Object(f.a)(he,"CONNECT_MODULES",function(e,t){var n,o=t.input,a=t.output;return Pe.a({connections:E.a(Ge(a),Ge(o),Pe.a((n={},Object(f.a)(n,o.moduleId,Ae.a(o.portId,{moduleId:a.moduleId,portId:a.portId,counter:0})),Object(f.a)(n,a.moduleId,Ae.a(a.portId,{moduleId:o.moduleId,portId:o.portId,counter:0})),n)))})(e)}),Object(f.a)(he,"DISCONNECT_MODULE",function(e,t){var n=t.port;return Pe.a({connections:E.a(Ge(n),Pe.a(Object(f.a)({},n.moduleId,Ve.a(n.portId))))})(e)}),Object(f.a)(he,"SET_STARTING_PORT",function(e,t){var n=t.port;return Pe.a({startingPort:y.a(n)})(e)}),Object(f.a)(he,"UNSET_STARTING_PORT",function(e){return Pe.a({startingPort:y.a(null)})(e)}),Object(f.a)(he,"MOVE_MODULE",function(e,t){var n=t.moduleId,o=t.x,a=t.rackId,r=e.modules[n].left,c=e.modules[n].width,i=r+20*Math.floor((o-r)/20),u=i+c;return u>window.innerWidth?e:E.a(q.a,Ne.a(function(t){var o=t.id,r=t.left,c=r+t.width;return o!==n&&Fe.a(o,e.racks[a])&&(r>=i&&r<u||r<i&&c>i||r===i&&c===u)}))(e.modules)?e:Pe.a({modules:Object(f.a)({},n,{left:y.a(i)}),connections:Object(f.a)({},n,b.a(Pe.a({counter:Le.a}))),racks:function(e){var t=Ue.a(Fe.a(n),e);return t===a?e:E.a(Se.a(t,Be.a([n])),Se.a(a,Re.a(n)))(e)},maxLeft:qe.a(i+e.modules[n].width)})(e)}),Object(f.a)(he,"REMOVE_MODULE",function(e,t){var n=t.moduleId,o=e.modules[n];return Pe.a({modules:Ve.a(n),racks:function(e){var t=Ue.a(Fe.a(n),e);return Se.a(t,Be.a([n]))(e)},maxLeft:function(e){return o.left+o.width===e?o.left:e}})(e)}),he),{modules:{},connections:{},startingPort:null,maxLeft:20,racks:[[],[]]}),We=n(124),Ye=n(111),Qe=n(96),ze=Object(v.a)((me={},Object(f.a)(me,"ADD_CABLE",function(e,t){var n=t.portId,o=t.fromPoint,a=t.color;return Pe.a({cables:Ae.a(n,{portId:n,fromPoint:o,toPoint:o,color:a})})(e)}),Object(f.a)(me,"MODIFY_CABLE",function(e,t){var n=t.portId,o=t.fromPoint,a=t.toPoint,r=t.toPortId;return Pe.a({cables:Pe.a(Object(f.a)({},n,We.a(Ye.a,Qe.a(ke.a,{fromPoint:o,toPoint:a,toPortId:r}))))})(e)}),Object(f.a)(me,"REMOVE_CABLE",function(e,t){var n=t.portId;return Pe.a({cables:Ve.a(n)})(e)}),me),{cables:{}}),He=function(e){return function(t){return Object(O.a)({},t,{isDirty:e})}},Xe=Object(v.a)((fe={},Object(f.a)(fe,"LOAD_PRESET_START",function(e){return Object(O.a)({},e,{presetLoading:!0})}),Object(f.a)(fe,"LOAD_PRESET_FINISH",function(e){return Object(O.a)({},He(!1)(e),{presetLoading:!1})}),Object(f.a)(fe,"REMOVE_MODULE",He(!0)),Object(f.a)(fe,"ADD_MODULE",He(!0)),Object(f.a)(fe,"REMOVE_CABLE",He(!0)),Object(f.a)(fe,"ADD_CABLE",He(!0)),fe),{presetLoading:!1,isDirty:!1}),Je=Object(h.c)({modules:Ke,cables:ze,rack:Xe}),$e=n(112),Ze=function(e){var t=e.getState;return function(e){return function(n){switch(n.type){case"CONNECT_MODULES":var o=t().modules,a=o.modules,r=o.connections,c=_.a([n.input.moduleId,"inputs",n.input.portId])(a),i=_.a([n.output.moduleId,"outputs",n.output.portId])(a);E.a(_.a([n.output.moduleId,n.output.portId]),$e.a(ke.a,E.a(function(e){var t=e.moduleId,n=e.portId;return _.a([t,"inputs",n])(a)},function(e){return e.disconnect(i)})))(r),E.a(_.a([n.input.moduleId,n.input.portId]),$e.a(ke.a,E.a(function(e){var t=e.moduleId,n=e.portId;return _.a([t,"outputs",n])(a)},function(e){return c.disconnect(e)})))(r),c&&i&&c.connect(i);break;case"DISCONNECT_MODULE":var u=t().modules,l=u.modules,d=u.connections,s=_.a([n.port.moduleId,"inputs",n.port.portId])(l);if(s)E.a(_.a([n.port.moduleId,n.port.portId]),function(e){var t=e.moduleId,n=e.portId;return _.a([t,"outputs",n])(l)},function(e){return s.disconnect(e)})(d);else{var p=_.a([n.port.moduleId,"outputs",n.port.portId])(l);E.a(_.a([n.port.moduleId,n.port.portId]),function(e){var t=e.moduleId,n=e.portId;return _.a([t,"inputs",n])(l)},function(e){return e.disconnect(p)})(d)}}return e(n)}}},et=[m.a,Ze],tt=Object(h.d)(Je,h.a.apply(void 0,et)),nt=Object(p.b)(null,{addModule:x})(function(e){var t=e.addModule;return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return t(Ee.KEYBOARD)}},"Add Keyboard"),a.a.createElement("button",{onClick:function(){return t(Ee.VCO)}},"Add VCO"),a.a.createElement("button",{onClick:function(){return t(Ee.VCA)}},"Add VCA"),a.a.createElement("button",{onClick:function(){return t(Ee.ADSR)}},"Add ADSR"),a.a.createElement("button",{onClick:function(){return t(Ee.VCF)}},"Add VCF"),a.a.createElement("button",{onClick:function(){return t(Ee.STEREO_AUDIO_INTERFACE)}},"Add Stereo Audio Interface"),a.a.createElement("button",{onClick:function(){return t(Ee.MONO_AUDIO_INTERFACE)}},"Add Mono Audio Interface"))}),ot=function(e,t){var n=e.y>t.y?e:t,o=e.y<t.y?e:t,a=.1*Math.abs(t.x-e.x)+Math.abs(e.y-t.y)/.4,r=.5+Math.log(1+Math.abs((t.y-e.y)/(t.x-e.x)))/(3*Math.log(2));r=n.x<o.x?1-r:r;var c=(e.x<t.x?1:-1)*r*Math.abs(e.x-t.x)||e.x;return"".concat(c," ").concat(a)},at=function(e){var t=e.fromPoint,n=e.toPoint,o=e.color;return a.a.createElement("path",{d:"M".concat(t.x," ").concat(t.y," q ").concat(ot(t,n)," ").concat(n.x-t.x," ").concat(n.y-t.y),opacity:.6,stroke:o,fill:"transparent",strokeWidth:6})},rt=Object(p.b)(function(e){var t=e.cables;return{cables:q.a(t.cables)}},{})(function(e){var t=e.cables,n=e.scrollLeft,o=e.scrollTop;return a.a.createElement("svg",{style:{position:"absolute",left:-n,top:0,width:"calc(100% + ".concat(n,"px)"),height:"calc(100% + ".concat(o,"px)"),pointerEvents:"none"}},t.map(function(e){var t=e.portId,n=e.fromPoint,o=e.toPoint,r=e.color;return a.a.createElement(at,{key:t,fromPoint:n,toPoint:o,color:r})}))}),ct={Basic:{modules:[{type:Ee.KEYBOARD,id:"KEYBOARD1"},{type:Ee.VCO,id:"VCO1"},{type:Ee.VCF,id:"VCF1"},{type:Ee.ADSR,id:"ADSR1"},{type:Ee.VCA,id:"VCA1"},{type:Ee.MONO_AUDIO_INTERFACE,id:"MONO_AUDIO_INTERFACE1"}],connections:[{input:{moduleId:"VCO1",portId:"V/Oct"},output:{moduleId:"KEYBOARD1",portId:"CV"}},{input:{moduleId:"VCF1",portId:"In"},output:{moduleId:"VCO1",portId:"Sine"}},{input:{moduleId:"ADSR1",portId:"Gate"},output:{moduleId:"KEYBOARD1",portId:"Gate"}},{input:{moduleId:"VCA1",portId:"In"},output:{moduleId:"VCF1",portId:"Out"}},{input:{moduleId:"VCA1",portId:"CV"},output:{moduleId:"ADSR1",portId:"Out"}},{input:{moduleId:"MONO_AUDIO_INTERFACE1",portId:"In"},output:{moduleId:"VCA1",portId:"Out"}}]}},it=n(125),ut=n(113),lt=n(126),dt=n(127),st=je.a(function(e,t){var n=t.input,o=t.output;e(S(t));var a="".concat(n.moduleId,"-").concat(n.portId),r=document.getElementById(a).getBoundingClientRect();e(D({portId:a,color:Y()({luminosity:"dark"}),fromPoint:{x:r.x+r.width/2,y:r.y+r.height/2}}));var c=document.getElementById("".concat(o.moduleId,"-").concat(o.portId)).getBoundingClientRect();e(P({portId:a,toPortId:"".concat(o.moduleId,"-").concat(o.portId),toPoint:{x:c.x+c.width/2,y:c.y+c.height/2}}))}),pt=function e(t,n,o){return function(){it.a(n().modules.modules)?(M.a(function(e){return t(x(e.type,e.id))})(o.modules),setTimeout(ht(t,n,o),10)):setTimeout(e(t,n,o),10)}},ht=function e(t,n,o){return function(){var a=b.a(ut.a("id"),n().modules.modules),r=b.a(ut.a("id"),o.modules);it.a(lt.a(a,r))?(M.a(st(t))(o.connections),setTimeout(mt(t,n,o.connections),50)):setTimeout(e(t,n,o),10)}},mt=function e(t,n,o){return function(){var a=n().modules.connections;dt.a(function(e){var t=a[e.input.moduleId];if(!t)return!1;var n=t[e.input.portId];return n&&n.moduleId===e.output.moduleId&&n.portId===e.output.portId},o)?t({type:"LOAD_PRESET_FINISH"}):setTimeout(e(t,n,o),10)}},ft=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handlePresetChange=n.handlePresetChange.bind(Object(g.a)(n)),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDirty,o=t.setPreset;t.presetLoading||!n||e.isDirty||o("")}},{key:"handlePresetChange",value:function(e){var t=e.target.value,n=this.props,o=n.loadPreset;(0,n.setPreset)(t),o(ct[t])}},{key:"render",value:function(){var e=this.props.preset;return a.a.createElement("div",null,a.a.createElement("select",{value:e,onChange:this.handlePresetChange},""===e&&a.a.createElement("option",{value:""},"Select Preset"),E.a(w.a,b.a(function(e){return a.a.createElement("option",{key:e,value:e},e)}))(ct)))}}]),t}(o.Component),vt=Object(I.a)(Object(I.c)("preset","setPreset",""),Object(p.b)(function(e){var t=e.rack;return{isDirty:t.isDirty,presetLoading:t.presetLoading}},{loadPreset:function(e){return function(t,n){t({type:"LOAD_PRESET_START"}),t(function(e,t){console.log("remove all modules"),E.a(w.a,b.a(function(t){return e(L(t))}))(t().modules.modules),e({type:"REMOVE_ALL_MODULES"})}),setTimeout(pt(t,n,e),10)}}}))(ft),bt=(n(84),n(82)),yt=(n(89),function(){return a.a.createElement("img",{alt:"screw",src:n(91),height:14,width:14,style:{margin:5}})}),Ot=function(e){var t=e.children;return a.a.createElement("div",{className:"panel_edge"},a.a.createElement(yt,null),t,a.a.createElement(yt,null))},gt=Object(p.b)(null,{removeModule:L})(function(e){var t=e.children,n=e.dragging,o=e.setDragging,r=e.width,c=e.left,i=e.removeModule,u=e.moduleId;return a.a.createElement("div",{className:"module-panel",style:{width:r,left:c,cursor:n?"grabbing":"grab"},onMouseDown:function(){return o(!0)},onMouseUp:function(){return o(!1)}},a.a.createElement(Ot,null,a.a.createElement("span",{onClick:function(){return i(u)},className:"btn_delete_module"},a.a.createElement(bt.a,{size:"xs",icon:"trash"}))),a.a.createElement("div",{className:"panel_content"},t),a.a.createElement(Ot,null))}),It=new Float32Array(256),Ct=0;Ct<128;Ct++)It[Ct]=-1,It[Ct+128]=1;var Et=new Float32Array(2);function wt(){var e=this.createOscillator();e.type="sawtooth";var t=this.createWaveShaper();t.curve=It,e.connect(t);var n=this.createGain();n.gain.value=0,e.width=n.gain,e.widthGain=n,n.connect(t);var o=this.createWaveShaper();return o.curve=Et,e.connect(o),o.connect(n),e.connect=function(){return t.connect.apply(t,arguments),e},e.disconnect=function(){return t.disconnect.apply(t,arguments),e},e}Et[0]=1,Et[1]=1;var jt=function(e){for(var t=new Float32Array(8192),n=0;n<8192;n++){var o=n/8191*4-2;t[n]=e*Math.pow(2,o)}return t};function _t(e,t){var n=this.createConstantSource();n.volt=n.offset;var o=this.createWaveShaper(),a=this.createGain();return o.curve=jt(e),a.gain.value=1/t,n.connect(a).connect(o),n.connect=function(){return o.connect.apply(o,arguments),a},n.disconnect=function(){return o.disconnect.apply(o,arguments),a},n}var Mt=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e));var o=window.AudioContext||window.webkitAudioContext;return n._audioContext=new o,n._audioContext.createPulseOscillator=wt,n._audioContext.createVoltToHzConverter=_t,n.handleMouseUp=n.handleMouseUp.bind(Object(g.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(g.a)(n)),n.handleDragging=n.handleDragging.bind(Object(g.a)(n)),n.handleRackScroll=n.handleRackScroll.bind(Object(g.a)(n)),window.onscroll=function(t){return console.log(e.setScrollTop(window.scrollY))},n._analyser=n._audioContext.createAnalyser(),window.analyser=n._analyser,window.visuallize=n.visuallize=n.visuallize.bind(Object(g.a)(n)),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"visuallize",value:function(){var e=this._canvas,t=e.getContext("2d"),n=this._analyser;n.fftSize=1024;var o=new Float32Array(n.frequencyBinCount);e.width=o.length,e.height=200;var a=e.width,r=e.height;t.clearRect(0,0,a,r),function e(){setTimeout(function(){return window.v=requestAnimationFrame(e)},300),n.getFloatTimeDomainData(o),t.fillStyle="rgb(200, 200, 200)",t.fillRect(0,0,a,r),t.lineWidth=2,t.strokeStyle="rgb(0, 0, 0)",t.beginPath();for(var c=0,i=0;i<o.length;i++){c=i;var u=(.5+o[i]/2)*r;0===i?t.moveTo(c,u):t.lineTo(c,u)}t.stroke()}()}},{key:"handleMouseUp",value:function(){var e=this.props,t=e.unsetStartingPort,n=e.removeCable,o=e.startingPort;o&&(n("".concat(o.moduleId,"-").concat(o.portId)),t())}},{key:"handleMouseMove",value:function(e){this.moveCable(e),this.dragModule(e)}},{key:"moveCable",value:function(e){var t=this.props,n=t.modifyCable,o=t.startingPort;o&&n({portId:"".concat(o.moduleId,"-").concat(o.portId),toPoint:{x:e.clientX,y:e.clientY}})}},{key:"dragModule",value:function(e){var t=this.props,n=t.draggingModuleId,o=t.moveModule,a=t.activeRackId;n&&o(n,e.clientX,a)}},{key:"handleDragging",value:function(e){var t=this;return function(n){t.props.setDraggingModuleId(n?e:null)}}},{key:"handleRackScroll",value:function(e){this.props.setScrollLeft(e.target.scrollLeft)}},{key:"render",value:function(){var e=this,t=this.props,n=t.racks,o=t.modules,r=t.draggingModuleId,c=t.scrollLeft,i=t.scrollTop,u=t.setActiveRackId;return a.a.createElement("div",{onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove,onScroll:this.handleRackScroll},a.a.createElement(nt,null),a.a.createElement(vt,null),a.a.createElement("div",null,a.a.createElement("div",{style:{overflowX:"scroll"}},n.map(function(t,n){return a.a.createElement("div",{key:n,className:"rack",style:{width:"calc(100% + ".concat(c,"px)")},onMouseEnter:function(){return u(n)}},t.map(function(t){var c=o[t],i=c.Module,u=c.width,l=c.left;return a.a.createElement(gt,{key:t,rackId:n,moduleId:t,setDragging:e.handleDragging(t),dragging:t===r,width:u,left:l},a.a.createElement(i,{id:t,audioContext:e._audioContext}))}))})),a.a.createElement(rt,{scrollLeft:c,scrollTop:i})),a.a.createElement("canvas",{ref:function(t){return e._canvas=t},className:"visualizer",width:"640",height:"100"}))}}]),t}(o.Component),Tt=Object(I.a)(Object(I.c)("draggingModuleId","setDraggingModuleId",null),Object(I.c)("scrollLeft","setScrollLeft",0),Object(I.c)("scrollTop","setScrollTop",0),Object(I.c)("activeRackId","setActiveRackId",0),Object(p.b)(function(e){var t=e.modules;return{modules:t.modules,racks:t.racks,startingPort:t.startingPort}},{modifyCable:P,removeCable:A,unsetStartingPort:F,moveModule:function(e,t,n){return{type:"MOVE_MODULE",moduleId:e,x:t,rackId:n}}}))(Mt),kt=n(39),Dt=n(83);n(92);kt.b.add(Dt.a);var Pt=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(p.a,{store:tt},a.a.createElement("div",{className:"App"},a.a.createElement(Tt,null)))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Pt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[56,2,1]]]);
//# sourceMappingURL=main.3d3a819d.chunk.js.map