(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{51:function(e,t,n){e.exports=n(77)},56:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){e.exports=n.p+"static/media/knob.23f417df.svg"},70:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){e.exports=n.p+"static/media/screw_header.2c2805d6.svg"},75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(44),c=n.n(r),i=(n(56),n(9)),u=n(10),d=n(13),l=n(11),s=n(14),p=n(6),h=n(28),m=n(47),f=n(7),O=n(91),b=n(26),v=n(67),I=n(3),y=n(2),g=function(e,t){return{type:"ADD_MODULE",moduleType:e,id:t}},E=function(e){return{type:"CONNECT_MODULES",output:e.output,input:e.input}},C=function(e,t){return{type:"REGISTER_INPUTS",id:e,inputs:t}},j=function(e,t){return{type:"REGISTER_OUTPUTS",id:e,outputs:t}},M=function(){return{type:"UNSET_STARTING_PORT"}},_=function(e){return{type:"ADD_CABLE",portId:e.portId,fromPoint:e.fromPoint,color:e.color}},A=function(e){return{type:"MODIFY_CABLE",portId:e.portId,toPoint:e.toPoint,toPortId:e.toPortId}},w=function(e){return{type:"REMOVE_CABLE",portId:e}},D=n(49),T=n.n(D),k=n(35),x=n.n(k),P=(n(64),Object(p.b)(function(e){return{startingPort:e.modules.startingPort}},{connectModules:E,disconnectModule:function(e){return{type:"DISCONNECT_MODULE",port:e}},setStartingPort:function(e){return{type:"SET_STARTING_PORT",port:e}},unsetStartingPort:M,addCable:_,removeCable:w,modifyCable:A})(function(e){var t,n=e.portId,o=e.connections,r=e.connectModules,c=e.disconnectModule,i=e.moduleId,u=e.portType,d=e.startingPort,l=e.setStartingPort,s=e.unsetStartingPort,p=e.addCable,h=e.removeCable,m=e.modifyCable;return a.a.createElement("div",{className:T()("port",{disabled:d&&d.portType===u}),onMouseDown:function(e){e.stopPropagation();var a={portId:n,portType:u,moduleId:i};o[n]&&(c({moduleId:i,portId:n}),h("".concat(o[n].moduleId,"-").concat(o[n].portId))),l(a);var r=t.getBoundingClientRect(),d=r.x,s=r.y,m=r.width,f=r.height;p({portId:"".concat(i,"-").concat(n),fromPoint:{x:d+m/2,y:s+f/2},color:x()({luminosity:"dark"})})},onMouseUp:function(e){var a;if(s(),d&&d.portType!==u&&(d.moduleId!==i||d.id!==n)){e.stopPropagation();var c=t.getBoundingClientRect(),l=c.x,p=c.y,O=c.width,b=c.height;!o[n]||o[n].moduleId===d.moduleId&&o[n].portId===d.portId||(h("".concat(o[n].moduleId,"-").concat(o[n].portId)),h("".concat(i,"-").concat(n))),m({portId:"".concat(d.moduleId,"-").concat(d.portId),toPoint:{x:l+O/2,y:p+b/2},toPortId:"".concat(i,"-").concat(n)}),r((a={},Object(f.a)(a,d.portType,d),Object(f.a)(a,u,{moduleId:i,portId:n}),a))}}},n,a.a.createElement("svg",{id:"".concat(i,"-").concat(n),height:"30",width:"30",ref:function(e){return t=e}},a.a.createElement("circle",{cx:"15",cy:"15",r:"14",stroke:"black",strokeWidth:"1",fill:"grey"}),a.a.createElement("circle",{cx:"15",cy:"15",r:"10",stroke:"black",strokeWidth:"1",fill:"grey"}),a.a.createElement("circle",{cx:"15",cy:"15",r:"7",stroke:"none",strokeWidth:"0",fill:"black"})))})),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleMouseMove=n.handleMouseMove.bind(Object(I.a)(Object(I.a)(n))),n.handleMouseDown=n.handleMouseDown.bind(Object(I.a)(Object(I.a)(n))),n.handleMouseUp=n.handleMouseUp.bind(Object(I.a)(Object(I.a)(n))),n.calculateValueAngle=n.calculateValueAngle.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)}},{key:"handleMouseMove",value:function(e){var t=this.props,n=t.isMoving,o=t.onChange,a=(t.value,t.max),r=t.min,c=t.step;if(n&&(e.stopPropagation(),e.preventDefault(),1===e.buttons)){var i=this._elem.getBoundingClientRect(),u=i.x,d=i.y,l=u+i.width/2,s=d+i.height/2,p=e.clientX-l,h=e.clientY-s,m=180*Math.atan2(h,p)/Math.PI;m<0&&(m+=360),(m-=120)<0&&(m+=360),m>315&&(m=0);var f=m/300*(a-r)+r;(f=Math.floor(f/c)*c)>a&&(f=a),o(f)}}},{key:"handleMouseDown",value:function(e){e.stopPropagation(),this.props.setIsMoving(!0)}},{key:"handleMouseUp",value:function(){this.props.setIsMoving(!1)}},{key:"calculateValueAngle",value:function(){var e=this.props,t=e.min,n=e.max;return 2*((e.value-t)/(n-t))*150}},{key:"render",value:function(){var e=this,t=this.props,o=t.height,r=void 0===o?50:o,c=t.width,i=void 0===c?50:c;return a.a.createElement("img",{ref:function(t){e._elem=t},style:{cursor:"pointer",margin:"auto",transform:"rotate(".concat(this.calculateValueAngle(),"deg)")},onMouseDown:this.handleMouseDown,alt:"knob",src:n(66),height:r,width:i})}}]),t}(o.Component),R=Object(y.a)(Object(y.c)("isMoving","setIsMoving",!1))(S);function N(e,t){var n=null,o=function(o){if(e[o]instanceof AudioParam){var a=e[o].value;return t(a),n=setInterval(function(){a!==e[o].value&&(a=e[o].value,t(a))},0),"break"}};for(var a in e){if("break"===o(a))break}return n}var U,L,B=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._oscillator=e.audioContext.createOscillator(),n.handleTypeChange=n.handleTypeChange.bind(Object(I.a)(Object(I.a)(n))),n.handleFrequencyChange=n.handleFrequencyChange.bind(Object(I.a)(Object(I.a)(n))),n.handleVOctChange=n.handleVOctChange.bind(Object(I.a)(Object(I.a)(n))),n.setPitch=n.setPitch.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;this._oscillator.start(),o(n,{"V/Oct":{connect:function(t){return e._cvInterval=N(t,e.handleVOctChange)},disconnect:function(){e._cvInterval&&(clearInterval(e._cvInterval),e._cvInterval=null),e.handleVOctChange(0)}}}),a(n,{Out:this._oscillator})}},{key:"handleTypeChange",value:function(e){var t=e.target.value;this.props.setType(t),this._oscillator.type=t}},{key:"handleFrequencyChange",value:function(e){this.props.setFrequency(e,this.setPitch)}},{key:"handleVOctChange",value:function(e){this.props.setVOct(e,this.setPitch)}},{key:"setPitch",value:function(){var e=this.props,t=e.vOct,n=e.frequency,o=e.audioContext,a=440*Math.pow(2,t+n);this._oscillator.frequency.setValueAtTime(a,o.currentTime)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.type,r=t.frequency,c=t.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"VCO"),"Shape:",a.a.createElement("select",{value:o,onChange:this.handleTypeChange},a.a.createElement("option",{value:"sine"},"Sine"),a.a.createElement("option",{value:"square"},"Square"),a.a.createElement("option",{value:"sawtooth"},"Sawtooth"),a.a.createElement("option",{value:"triangle"},"Triangle")),"Freq:",a.a.createElement(R,{min:-2,max:2,step:.001,value:r,onChange:function(t){return e.handleFrequencyChange(t)}}),a.a.createElement(P,{portId:"V/Oct",connections:c,moduleId:n,portType:"input"}),a.a.createElement(P,{portId:"Out",connections:c,moduleId:n,portType:"output"}))}}]),t}(o.Component),V=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof OscillatorNode),Object(y.b)("panelWidth",6),Object(y.c)("type","setType","sine"),Object(y.c)("frequency","setFrequency",0),Object(y.c)("vOct","setVOct",0),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C,registerOutputs:j}))(B),F=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._leftPanner=new StereoPannerNode(e.audioContext,{pan:-1}),n._rightPanner=new StereoPannerNode(e.audioContext,{pan:1}),n._leftPanner.connect(e.audioContext.destination),n._rightPanner.connect(e.audioContext.destination),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id;(0,t.registerInputs)(n,{Left:{connect:function(t){return t.connect(e._leftPanner)},disconnect:function(t){return t.disconnect(e._leftPanner)}},Right:{connect:function(t){return t.connect(e._rightPanner)},disconnect:function(t){return t.disconnect(e._rightPanner)}}})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"Stereo"),a.a.createElement(P,{portId:"Left",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"Right",connections:n,moduleId:t,portType:"input"}))}}]),t}(o.Component),K=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof StereoPannerNode),Object(y.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C}))(F),G=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id;(0,t.registerInputs)(n,{In:{connect:function(t){return t.connect(e.props.audioContext.destination)},disconnect:function(t){return t.disconnect(e.props.audioContext.destination)}}})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"Mono"),a.a.createElement(P,{portId:"In",connections:n,moduleId:t,portType:"input"}))}}]),t}(o.Component),W=Object(y.a)(Object(y.b)("isBrowserSupported",!0),Object(y.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C}))(G),q=n(100),Y=[90,83,88,68,67,86,71,66,72,78,74,77,188],X=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C"],J={"C#":"1/4","D#":"3/6","F#":"6/9","G#":"8/11","A#":"10/13"},$=function(e,t){return t-5+(e+3)/12},z=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._gate=e.audioContext.createConstantSource(),n._gate.offset.value=0,n._gate.start(),n._cv=e.audioContext.createConstantSource(),n._cv.offset.value=0,n._cv.start(),n.handleKeyDown=n.handleKeyDown.bind(Object(I.a)(Object(I.a)(n))),n.handleKeyUp=n.handleKeyUp.bind(Object(I.a)(Object(I.a)(n))),n.handleOctaveChange=n.handleOctaveChange.bind(Object(I.a)(Object(I.a)(n))),n.handleKeyboardDown=n.handleKeyboardDown.bind(Object(I.a)(Object(I.a)(n))),n.handleKeyboardUp=n.handleKeyboardUp.bind(Object(I.a)(Object(I.a)(n))),n._keyboardDown=!1,n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.id;(0,e.registerOutputs)(t,{CV:this._cv,Gate:this._gate}),document.addEventListener("keydown",this.handleKeyboardDown),document.addEventListener("keyup",this.handleKeyboardUp)}},{key:"handleKeyboardDown",value:function(e){var t=q.a(e.keyCode,Y);this._keyboardDown||-1===t||(this._keyboardDown=!0,this.handleKeyDown($(t,this.props.octave)))}},{key:"handleKeyboardUp",value:function(){this._keyboardDown=!1,this.handleKeyUp()}},{key:"handleKeyDown",value:function(e){this.changeFrequency(e),this._gate.offset.value=1}},{key:"handleKeyUp",value:function(){this._gate.offset.value=0}},{key:"handleOctaveChange",value:function(e){var t=e.target.value,n=this.props,o=n.setOctave,a=n.octave,r=Number(t),c=this._cv.offset.value;this.changeFrequency(c+r-a),o(r)}},{key:"changeFrequency",value:function(e){this._cv.offset.value=e}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.connections,r=t.octave;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"\xb5Keyboard"),"Octave",a.a.createElement("select",{value:r,onChange:this.handleOctaveChange},a.a.createElement("option",{value:2},"-2"),a.a.createElement("option",{value:3},"-1"),a.a.createElement("option",{value:4},"0"),a.a.createElement("option",{value:5},"+1"),a.a.createElement("option",{value:6},"+2")),a.a.createElement("div",{style:{display:"grid"}},X.map(function(t,n){var o=t.endsWith("#"),c=o?J[t]:n+1;return[a.a.createElement("div",{key:"TITLE_".concat(t).concat(n),style:{alignSelf:"center",gridRow:c,gridColumn:o?4:1}},t),a.a.createElement("button",{key:"".concat(t).concat(n),onMouseDown:function(t){t.stopPropagation(),e.handleKeyDown($(n,r))},onMouseUp:e.handleKeyUp,style:{height:20,width:20,gridRow:c,alignSelf:"center",gridColumn:o?3:2,backgroundColor:o?"black":"white"}})]})),a.a.createElement("div",{style:{display:"flex",flex:1}},a.a.createElement(P,{portId:"CV",connections:o,moduleId:n,portType:"output"}),a.a.createElement(P,{portId:"Gate",connections:o,moduleId:n,portType:"output"})))}}]),t}(o.Component),H=Object(y.a)(Object(y.b)("isBrowserSupported",!0),Object(y.b)("panelWidth",6),Object(y.c)("octave","setOctave",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerOutputs:j}))(z),Q=function(e){return 15*Math.pow(e,4)+.001},Z=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._adsr=e.audioContext.createConstantSource(),n._adsr.offset.value=-1,n._adsr.start(),n.handleGateInChange=n.handleGateInChange.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;o(n,{Gate:{connect:function(t){return e._gateInterval=N(t,e.handleGateInChange)},disconnect:function(){e._gateInterval&&(clearInterval(e._gateInterval),e._gateInterval=null)}}}),a(n,{Out:this._adsr})}},{key:"handleGateInChange",value:function(e){var t=this.props,n=t.sustain,o=t.audioContext,a=Q(this.props.attack),r=Q(this.props.decay),c=Q(this.props.release),i=o.currentTime,u=this._adsr.offset;1===e?(u.cancelScheduledValues(0),u.linearRampToValueAtTime(-1,i+.01),u.linearRampToValueAtTime(0,i+a),u.linearRampToValueAtTime(n-1,i+a+r)):0===e&&(u.cancelScheduledValues(0),u.setValueAtTime(u.value,i),u.linearRampToValueAtTime(-1,i+c))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections,o=e.attack,r=e.setAttack,c=e.decay,i=e.setDecay,u=e.sustain,d=e.setSustain,l=e.release,s=e.setRelease;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"ADSR"),"Attack:",a.a.createElement(R,{min:0,max:1,step:.001,value:o,onChange:function(e){return r(e)},width:30,height:30}),"Decay:",a.a.createElement(R,{min:0,max:1,step:.001,value:c,onChange:function(e){return i(e)},width:30,height:30}),"Sustain:",a.a.createElement(R,{min:0,max:1,step:.01,value:u,onChange:function(e){return d(Number(e))},width:30,height:30}),"Release:",a.a.createElement(R,{min:0,max:1,step:.001,value:l,onChange:function(e){return s(Number(e))},width:30,height:30}),a.a.createElement(P,{portId:"Gate",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"Out",connections:n,moduleId:t,portType:"output"}))}}]),t}(o.Component),ee=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof ConstantSourceNode),Object(y.b)("panelWidth",6),Object(y.c)("attack","setAttack",.5),Object(y.c)("decay","setDecay",.5),Object(y.c)("sustain","setSustain",.5),Object(y.c)("release","setRelease",.5),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C,registerOutputs:j}))(Z),te=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._gain=e.audioContext.createGain(),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;t.audioContext;o(n,{In:{connect:function(t){return t.connect(e._gain)},disconnect:function(t){return t.disconnect(e._gain)}},CV:{connect:function(t){return t.connect(e._gain.gain)},disconnect:function(t){return t.disconnect(e._gain.gain)}}}),a(n,{Out:this._gain})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"VCA"),a.a.createElement(P,{portId:"In",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"CV",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"Out",connections:n,moduleId:t,portType:"output"}))}}]),t}(o.Component),ne=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof GainNode),Object(y.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C,registerOutputs:j}))(te),oe={OSCILLATOR:"OSCILLATOR",STEREO_AUDIO_INTERFACE:"STEREO_AUDIO_INTERFACE",MONO_AUDIO_INTERFACE:"MONO_AUDIO_INTERFACE",KEYBOARD:"KEYBOARD",ADSR:"ADSR",AMP:"AMP"},ae=b.a(v.a(1))(oe),re=n(78),ce=n(79),ie=n(80),ue=n(93),de=n(81),le=n(94),se=n(40),pe=n(92),he=n(82),me=n(69),fe=n(83),Oe=n(68),be=n(84),ve=n(97),Ie=n(41),ye=re.a(function(e,t){var n=e.moduleId,o=e.portId;return ce.a(ie.a(ue.a(de.a),[n,o]),le.a(se.a([n,o]),function(e){return pe.a([e.moduleId,e.portId],t)}))(t)}),ge=Object(O.a)((U={},Object(f.a)(U,"ADD_MODULE",function(e,t){var n=t.moduleType,o=function(e){var t=e.type,n=e.id,o={id:(void 0===n?void 0:n)||"".concat(t).concat(ae[t])};switch(t){case oe.OSCILLATOR:o.Module=V;break;case oe.STEREO_AUDIO_INTERFACE:o.Module=K;break;case oe.MONO_AUDIO_INTERFACE:o.Module=W;break;case oe.KEYBOARD:o.Module=H;break;case oe.ADSR:o.Module=ee;break;case oe.AMP:o.Module=ne;break;default:throw new Error("Cannot create module of type: ".concat(t))}return o.Module.isBrowserSupported?(o.width=20*o.Module.panelWidth,ae[t]++,o):null}({type:n,id:t.id});return o?(o.left=e.maxLeft,he.a({modules:me.a(o.id,o),connections:me.a(o.id,{}),maxLeft:fe.a(o.width)})(e)):(window.alert("Your browser doesn't support this module: ".concat(n)),e)}),Object(f.a)(U,"REGISTER_INPUTS",function(e,t){var n=t.id,o=t.inputs;return he.a({modules:he.a(Object(f.a)({},n,me.a("inputs",o)))})(e)}),Object(f.a)(U,"REGISTER_OUTPUTS",function(e,t){var n=t.id,o=t.outputs;return he.a({modules:he.a(Object(f.a)({},n,me.a("outputs",o)))})(e)}),Object(f.a)(U,"CONNECT_MODULES",function(e,t){var n,o=t.input,a=t.output;return he.a({connections:le.a(ye(a),ye(o),he.a((n={},Object(f.a)(n,o.moduleId,me.a(o.portId,{moduleId:a.moduleId,portId:a.portId})),Object(f.a)(n,a.moduleId,me.a(a.portId,{moduleId:o.moduleId,portId:o.portId})),n)))})(e)}),Object(f.a)(U,"DISCONNECT_MODULE",function(e,t){var n=t.port;return he.a({connections:le.a(ye(n),he.a(Object(f.a)({},n.moduleId,Oe.a(n.portId))))})(e)}),Object(f.a)(U,"SET_STARTING_PORT",function(e,t){var n=t.port;return he.a({startingPort:v.a(n)})(e)}),Object(f.a)(U,"UNSET_STARTING_PORT",function(e){return he.a({startingPort:v.a(null)})(e)}),Object(f.a)(U,"MOVE_MODULE",function(e,t){var n=t.moduleId,o=t.x,a=e.modules[n].left,r=e.modules[n].width,c=a+20*Math.floor((o-a)/20),i=c+r;return le.a(be.a,ve.a(function(e){var t=e.id,o=e.left,a=o+e.width;return t!==n&&(o>=c&&o<i||o<c&&a>c||o===c&&a===i)}))(e.modules)?e:he.a({modules:he.a(Object(f.a)({},n,he.a({left:v.a(c)}))),maxLeft:Ie.a(c+e.modules[n].width)})(e)}),U),{modules:{},connections:{},startingPort:null,maxLeft:20}),Ee=n(101),Ce=n(85),je=n(86),Me=n(87),_e=n(96),Ae=n(88),we=n(98),De=function(e){return he.a({x:fe.a(e)})},Te=Object(O.a)((L={},Object(f.a)(L,"ADD_CABLE",function(e,t){var n=t.portId,o=t.fromPoint,a=t.color;return he.a({cables:me.a(n,{portId:n,fromPoint:o,toPoint:o,color:a})})(e)}),Object(f.a)(L,"MODIFY_CABLE",function(e,t){var n=t.portId,o=t.toPoint,a=t.toPortId;return he.a({cables:he.a(Object(f.a)({},n,Ee.a(Ce.a,{toPoint:o,toPortId:a})))})(e)}),Object(f.a)(L,"REMOVE_CABLE",function(e,t){var n=t.portId;return he.a({cables:Oe.a(n)})(e)}),Object(f.a)(L,"MODIFY_MODULE_CABLES",function(e,t){var n=t.moduleId,o=t.diff;return he.a({cables:b.a(je.a([[Me.a({portId:_e.a(n)}),he.a({fromPoint:De(o)})],[Me.a({toPortId:_e.a(n)}),he.a({toPoint:De(o)})],[Ae.a,we.a]]))})(e)}),L),{cables:{}}),ke=Object(h.c)({modules:ge,cables:Te}),xe=n(89),Pe=function(e){var t=e.getState;return function(e){return function(n){switch(n.type){case"CONNECT_MODULES":var o=t().modules,a=o.modules,r=o.connections,c=se.a([n.input.moduleId,"inputs",n.input.portId])(a),i=se.a([n.output.moduleId,"outputs",n.output.portId])(a);le.a(se.a([n.output.moduleId,n.output.portId]),xe.a(de.a,le.a(function(e){var t=e.moduleId,n=e.portId;return se.a([t,"inputs",n])(a)},function(e){return e.disconnect(i)})))(r),le.a(se.a([n.input.moduleId,n.input.portId]),xe.a(de.a,le.a(function(e){var t=e.moduleId,n=e.portId;return se.a([t,"outputs",n])(a)},function(e){return c.disconnect(e)})))(r),c.connect(i);break;case"DISCONNECT_MODULE":var u=t().modules,d=u.modules,l=u.connections,s=se.a([n.port.moduleId,"inputs",n.port.portId])(d);if(s)le.a(se.a([n.port.moduleId,n.port.portId]),function(e){var t=e.moduleId,n=e.portId;return se.a([t,"outputs",n])(d)},function(e){return s.disconnect(e)})(l);else{var p=se.a([n.port.moduleId,"outputs",n.port.portId])(d);le.a(se.a([n.port.moduleId,n.port.portId]),function(e){var t=e.moduleId,n=e.portId;return se.a([t,"inputs",n])(d)},function(e){return e.disconnect(p)})(l)}}return e(n)}}},Se=[m.a,Pe],Re=Object(h.d)(ke,h.a.apply(void 0,Se)),Ne=n(99),Ue=n(42),Le=Object(p.b)(null,{addModule:g})(function(e){var t=e.addModule;return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return t(oe.KEYBOARD)}},"Add Keyboard"),a.a.createElement("button",{onClick:function(){return t(oe.OSCILLATOR)}},"Add Oscillator"),a.a.createElement("button",{onClick:function(){return t(oe.AMP)}},"Add Amplifier"),a.a.createElement("button",{onClick:function(){return t(oe.ADSR)}},"Add ADSR"),a.a.createElement("button",{onClick:function(){return t(oe.STEREO_AUDIO_INTERFACE)}},"Add Stereo Audio Interface"),a.a.createElement("button",{onClick:function(){return t(oe.MONO_AUDIO_INTERFACE)}},"Add Mono Audio Interface"))}),Be=function(e){var t=e.fromPoint,n=e.toPoint,o=e.color;return a.a.createElement("path",{d:"M".concat(t.x," ").concat(t.y," q ").concat(function(e,t){var n=e.y>t.y?e:t,o=e.y<t.y?e:t,a=.1*Math.abs(t.x-e.x)+Math.abs(e.y-t.y)/.4,r=.5+Math.log(1+Math.abs((t.y-e.y)/(t.x-e.x)))/(3*Math.log(2));r=n.x<o.x?1-r:r;var c=(e.x<t.x?1:-1)*r*Math.abs(e.x-t.x)||e.x;return"".concat(c," ").concat(a)}(t,n)," ").concat(n.x-t.x," ").concat(n.y-t.y),stroke:o,fill:"transparent",strokeWidth:6})},Ve=Object(p.b)(function(e){var t=e.cables;return{cables:be.a(t.cables)}},{})(function(e){var t=e.cables;return a.a.createElement("svg",{style:{position:"fixed",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none"}},t.map(function(e){var t=e.portId,n=e.fromPoint,o=e.toPoint,r=e.color;return a.a.createElement(Be,{key:t,fromPoint:n,toPoint:o,color:r})}))}),Fe=n(33),Ke={Basic:{modules:[{type:oe.KEYBOARD,id:"KEYBOARD1"},{type:oe.OSCILLATOR,id:"OSCILLATOR1"},{type:oe.ADSR,id:"ADSR1"},{type:oe.AMP,id:"AMP1"},{type:oe.MONO_AUDIO_INTERFACE,id:"MONO_AUDIO_INTERFACE1"}],connections:[{input:{moduleId:"OSCILLATOR1",portId:"V/Oct"},output:{moduleId:"KEYBOARD1",portId:"CV"}},{input:{moduleId:"ADSR1",portId:"Gate"},output:{moduleId:"KEYBOARD1",portId:"Gate"}},{input:{moduleId:"AMP1",portId:"In"},output:{moduleId:"OSCILLATOR1",portId:"Out"}},{input:{moduleId:"AMP1",portId:"CV"},output:{moduleId:"ADSR1",portId:"Out"}},{input:{moduleId:"MONO_AUDIO_INTERFACE1",portId:"In"},output:{moduleId:"AMP1",portId:"Out"}}]}},Ge=n(95),We=n(90),qe=re.a(function(e,t,n){var o=t().modules,a=n.input,r=n.output;if(Ge.a([se.a([a.moduleId,"inputs",a.portId]),se.a([r.moduleId,"outputs",r.portId])])(o.modules)){e(E(n));var c="".concat(a.moduleId,"-").concat(a.portId),i=document.getElementById(c).getBoundingClientRect();e(_({portId:c,color:x()({luminosity:"dark"}),fromPoint:{x:i.x+i.width/2,y:i.y+i.height/2}}));var u=document.getElementById("".concat(r.moduleId,"-").concat(r.portId)).getBoundingClientRect();e(A({portId:c,toPortId:"".concat(r.moduleId,"-").concat(r.portId),toPoint:{x:u.x+u.width/2,y:u.y+u.height/2}}))}else setTimeout(function(){return qe(e,t,n)},0)}),Ye=Object(y.a)(Object(y.c)("preset","setPreset",""),Object(p.b)(null,{loadPreset:function(e){return function(t,n){We.a(function(e){return t(g(e.type,e.id))})(e.modules),We.a(qe(t,n))(e.connections)}}}))(function(e){var t=e.preset,n=e.setPreset,o=e.loadPreset;return a.a.createElement("div",null,a.a.createElement("select",{value:t,onChange:function(e){var t=e.target.value;n(t),o(Ke[t])}},""===t&&a.a.createElement("option",{value:""},"Select Preset"),le.a(Fe.a,b.a(function(e){return a.a.createElement("option",{key:e,value:e},e)}))(Ke)))}),Xe=(n(70),n(72),function(){return a.a.createElement("img",{alt:"screw",src:n(74),height:14,width:14,style:{margin:5}})}),Je=function(e){var t=e.children;return a.a.createElement("div",{className:"panel_edge"},a.a.createElement(Xe,null),t,a.a.createElement(Xe,null))},$e=function(e){var t=e.children,n=e.dragging,o=e.setDragging,r=e.width,c=e.left;return a.a.createElement("div",{className:"module-panel",style:{width:r,left:c,cursor:n?"grabbing":"grab"},onMouseDown:function(){return o(!0)},onMouseUp:function(){return o(!1)}},a.a.createElement(Je,null),a.a.createElement("div",{className:"panel_content"},t),a.a.createElement(Je,null))},ze=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(d.a)(this,Object(l.a)(t).call(this,e));var o=window.AudioContext||window.webkitAudioContext;return n._audioContext=new o,n.handleMouseUp=n.handleMouseUp.bind(Object(I.a)(Object(I.a)(n))),n.handleMouseMove=n.handleMouseMove.bind(Object(I.a)(Object(I.a)(n))),n.handleDragging=n.handleDragging.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){var t,n=this.props,o=n.modules,a=n.modifyModuleCables,r=Ne.a(function(n){var o=n.id,a=n.left;return t=Ne.a(Me.a({id:Ue.a(o),left:ue.a(Ue.a(a))}))(e.modules),!de.a(t)})(o);r&&a({moduleId:r.id,diff:r.left-t.left})}},{key:"handleMouseUp",value:function(){var e=this.props,t=e.unsetStartingPort,n=e.removeCable,o=e.startingPort;o&&(n("".concat(o.moduleId,"-").concat(o.portId)),t())}},{key:"handleMouseMove",value:function(e){this.moveCable(e),this.dragModule(e)}},{key:"moveCable",value:function(e){var t=this.props,n=t.modifyCable,o=t.startingPort;o&&n({portId:"".concat(o.moduleId,"-").concat(o.portId),toPoint:{x:e.clientX,y:e.clientY}})}},{key:"dragModule",value:function(e){var t=this.props,n=t.draggingModuleId,o=t.moveModule;n&&o(n,e.clientX)}},{key:"handleDragging",value:function(e){var t=this;return function(n){t.props.setDraggingModuleId(n?e:null)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.modules,o=t.draggingModuleId;return a.a.createElement("div",{onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove},a.a.createElement(Le,null),a.a.createElement(Ye,null),a.a.createElement("div",null,a.a.createElement("div",{className:"rack"},n.map(function(t){var n=t.Module,r=t.id,c=t.width,i=t.left;return a.a.createElement($e,{key:r,setDragging:e.handleDragging(r),dragging:r===o,width:c,left:i},a.a.createElement(n,{id:r,audioContext:e._audioContext}))})),a.a.createElement(Ve,null)))}}]),t}(o.Component),He=Object(y.a)(Object(y.c)("draggingModuleId","setDraggingModuleId",null),Object(p.b)(function(e){return{modules:be.a(e.modules.modules),startingPort:e.modules.startingPort}},{modifyCable:A,removeCable:w,unsetStartingPort:M,moveModule:function(e,t){return{type:"MOVE_MODULE",moduleId:e,x:t}},modifyModuleCables:function(e){return{type:"MODIFY_MODULE_CABLES",moduleId:e.moduleId,diff:e.diff}}}))(ze),Qe=(n(75),function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(p.a,{store:Re},a.a.createElement("div",{className:"App"},a.a.createElement(He,null)))}}]),t}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,2,1]]]);
//# sourceMappingURL=main.a168cb39.chunk.js.map