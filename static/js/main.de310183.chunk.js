(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{51:function(e,t,n){e.exports=n(77)},56:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){e.exports=n.p+"static/media/knob.23f417df.svg"},70:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){e.exports=n.p+"static/media/screw_header.2c2805d6.svg"},75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(44),c=n.n(r),i=(n(56),n(9)),u=n(10),l=n(12),d=n(11),s=n(13),p=n(6),h=n(28),m=n(47),f=n(7),b=n(91),O=n(26),v=n(67),I=n(2),y=n(3),g=function(e,t){return{type:"ADD_MODULE",moduleType:e,id:t}},E=function(e){return{type:"CONNECT_MODULES",output:e.output,input:e.input}},C=function(e,t){return{type:"REGISTER_INPUTS",id:e,inputs:t}},j=function(e,t){return{type:"REGISTER_OUTPUTS",id:e,outputs:t}},M=function(){return{type:"UNSET_STARTING_PORT"}},_=function(e){return{type:"ADD_CABLE",portId:e.portId,fromPoint:e.fromPoint,color:e.color}},w=function(e){return{type:"MODIFY_CABLE",portId:e.portId,toPoint:e.toPoint,toPortId:e.toPortId}},T=function(e){return{type:"REMOVE_CABLE",portId:e}},A=n(49),k=n.n(A),D=n(35),x=n.n(D),P=(n(64),Object(p.b)(function(e){return{startingPort:e.modules.startingPort}},{connectModules:E,disconnectModule:function(e){return{type:"DISCONNECT_MODULE",port:e}},setStartingPort:function(e){return{type:"SET_STARTING_PORT",port:e}},unsetStartingPort:M,addCable:_,removeCable:T,modifyCable:w})(function(e){var t,n=e.portId,o=e.connections,r=e.connectModules,c=e.disconnectModule,i=e.moduleId,u=e.portType,l=e.startingPort,d=e.setStartingPort,s=e.unsetStartingPort,p=e.addCable,h=e.removeCable,m=e.modifyCable;return a.a.createElement("div",{className:k()("port",{disabled:l&&l.portType===u}),onMouseDown:function(e){e.stopPropagation();var a={portId:n,portType:u,moduleId:i};o[n]&&(c({moduleId:i,portId:n}),h("".concat(o[n].moduleId,"-").concat(o[n].portId))),d(a);var r=t.getBoundingClientRect(),l=r.x,s=r.y,m=r.width,f=r.height;p({portId:"".concat(i,"-").concat(n),fromPoint:{x:l+m/2,y:s+f/2},color:x()({luminosity:"dark"})})},onMouseUp:function(e){var a;if(s(),l&&l.portType!==u&&(l.moduleId!==i||l.id!==n)){e.stopPropagation();var c=t.getBoundingClientRect(),d=c.x,p=c.y,b=c.width,O=c.height;!o[n]||o[n].moduleId===l.moduleId&&o[n].portId===l.portId||(h("".concat(o[n].moduleId,"-").concat(o[n].portId)),h("".concat(i,"-").concat(n))),m({portId:"".concat(l.moduleId,"-").concat(l.portId),toPoint:{x:d+b/2,y:p+O/2},toPortId:"".concat(i,"-").concat(n)}),r((a={},Object(f.a)(a,l.portType,l),Object(f.a)(a,u,{moduleId:i,portId:n}),a))}}},n,a.a.createElement("svg",{id:"".concat(i,"-").concat(n),height:"30",width:"30",ref:function(e){return t=e}},a.a.createElement("circle",{cx:"15",cy:"15",r:"14",stroke:"black",strokeWidth:"1",fill:"grey"}),a.a.createElement("circle",{cx:"15",cy:"15",r:"10",stroke:"black",strokeWidth:"1",fill:"grey"}),a.a.createElement("circle",{cx:"15",cy:"15",r:"7",stroke:"none",strokeWidth:"0",fill:"black"})))})),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleMouseMove=n.handleMouseMove.bind(Object(I.a)(Object(I.a)(n))),n.handleMouseDown=n.handleMouseDown.bind(Object(I.a)(Object(I.a)(n))),n.handleMouseUp=n.handleMouseUp.bind(Object(I.a)(Object(I.a)(n))),n.calculateValueAngle=n.calculateValueAngle.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)}},{key:"handleMouseMove",value:function(e){var t=this.props,n=t.isMoving,o=t.onChange,a=(t.value,t.max),r=t.min,c=t.step;if(n&&(e.stopPropagation(),e.preventDefault(),1===e.buttons)){var i=this._elem.getBoundingClientRect(),u=i.x,l=i.y,d=u+i.width/2,s=l+i.height/2,p=e.clientX-d,h=e.clientY-s,m=180*Math.atan2(h,p)/Math.PI;m<0&&(m+=360),(m-=120)<0&&(m+=360),m>315&&(m=0);var f=m/300*(a-r)+r;(f=Math.floor(f/c)*c)>a&&(f=a),o(f)}}},{key:"handleMouseDown",value:function(e){e.stopPropagation(),this.props.setIsMoving(!0)}},{key:"handleMouseUp",value:function(){this.props.setIsMoving(!1)}},{key:"calculateValueAngle",value:function(){var e=this.props,t=e.min,n=e.max;return 2*((e.value-t)/(n-t))*150}},{key:"render",value:function(){var e=this,t=this.props,o=t.height,r=void 0===o?50:o,c=t.width,i=void 0===c?50:c;return a.a.createElement("img",{ref:function(t){e._elem=t},style:{cursor:"pointer",margin:"auto",transform:"rotate(".concat(this.calculateValueAngle(),"deg)")},onMouseDown:this.handleMouseDown,alt:"knob",src:n(66),height:r,width:i})}}]),t}(o.Component),R=Object(y.a)(Object(y.c)("isMoving","setIsMoving",!1))(S);function N(e,t){var n=null,o=function(o){if(e[o]instanceof AudioParam){var a=e[o].value;return t(a),n=setInterval(function(){a!==e[o].value&&(a=e[o].value,t(a))},0),"break"}};for(var a in e){if("break"===o(a))break}return n}var U,L,F=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._oscillator=e.audioContext.createOscillator(),n.handleTypeChange=n.handleTypeChange.bind(Object(I.a)(Object(I.a)(n))),n.handleFrequencyChange=n.handleFrequencyChange.bind(Object(I.a)(Object(I.a)(n))),n.handleVOctChange=n.handleVOctChange.bind(Object(I.a)(Object(I.a)(n))),n.setPitch=n.setPitch.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;this._oscillator.start(),o(n,{"V/Oct":{connect:function(t){return e._cvInterval=N(t,e.handleVOctChange)},disconnect:function(){e._cvInterval&&(clearInterval(e._cvInterval),e._cvInterval=null),e.handleVOctChange(0)}}}),a(n,{Out:this._oscillator})}},{key:"handleTypeChange",value:function(e){var t=e.target.value;this.props.setType(t),this._oscillator.type=t}},{key:"handleFrequencyChange",value:function(e){this.props.setFrequency(e,this.setPitch)}},{key:"handleVOctChange",value:function(e){this.props.setVOct(e,this.setPitch)}},{key:"setPitch",value:function(){var e=this.props,t=e.vOct,n=e.frequency,o=e.audioContext,a=440*Math.pow(2,t+n);this._oscillator.frequency.setValueAtTime(a,o.currentTime)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.type,r=t.frequency,c=t.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"VCO"),"Shape:",a.a.createElement("select",{value:o,onChange:this.handleTypeChange},a.a.createElement("option",{value:"sine"},"Sine"),a.a.createElement("option",{value:"square"},"Square"),a.a.createElement("option",{value:"sawtooth"},"Sawtooth"),a.a.createElement("option",{value:"triangle"},"Triangle")),"Freq:",a.a.createElement(R,{min:-2,max:2,step:.001,value:r,onChange:function(t){return e.handleFrequencyChange(t)}}),a.a.createElement(P,{portId:"V/Oct",connections:c,moduleId:n,portType:"input"}),a.a.createElement(P,{portId:"Out",connections:c,moduleId:n,portType:"output"}))}}]),t}(o.Component),V=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof OscillatorNode),Object(y.b)("panelWidth",6),Object(y.c)("type","setType","sine"),Object(y.c)("frequency","setFrequency",0),Object(y.c)("vOct","setVOct",0),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C,registerOutputs:j}))(F),B=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._leftPanner=new StereoPannerNode(e.audioContext,{pan:-1}),n._rightPanner=new StereoPannerNode(e.audioContext,{pan:1}),n._leftPanner.connect(e.audioContext.destination),n._rightPanner.connect(e.audioContext.destination),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id;(0,t.registerInputs)(n,{Left:{connect:function(t){return t.connect(e._leftPanner)},disconnect:function(t){return t.disconnect(e._leftPanner)}},Right:{connect:function(t){return t.connect(e._rightPanner)},disconnect:function(t){return t.disconnect(e._rightPanner)}}})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"Stereo"),a.a.createElement(P,{portId:"Left",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"Right",connections:n,moduleId:t,portType:"input"}))}}]),t}(o.Component),q=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof StereoPannerNode),Object(y.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C}))(B),K=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id;(0,t.registerInputs)(n,{In:{connect:function(t){return t.connect(e.props.audioContext.destination)},disconnect:function(t){return t.disconnect(e.props.audioContext.destination)}}})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"Mono"),a.a.createElement(P,{portId:"In",connections:n,moduleId:t,portType:"input"}))}}]),t}(o.Component),G=Object(y.a)(Object(y.b)("isBrowserSupported",!0),Object(y.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C}))(K),W=n(100),Y=[90,83,88,68,67,86,71,66,72,78,74,77,188],Q=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C"],X={"C#":"1/4","D#":"3/6","F#":"6/9","G#":"8/11","A#":"10/13"},J=function(e,t){return t-5+(e+3)/12},H=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._gate=e.audioContext.createConstantSource(),n._gate.offset.value=0,n._gate.start(),n._cv=e.audioContext.createConstantSource(),n._cv.offset.value=0,n._cv.start(),n.handleKeyDown=n.handleKeyDown.bind(Object(I.a)(Object(I.a)(n))),n.handleKeyUp=n.handleKeyUp.bind(Object(I.a)(Object(I.a)(n))),n.handleOctaveChange=n.handleOctaveChange.bind(Object(I.a)(Object(I.a)(n))),n.handleKeyboardDown=n.handleKeyboardDown.bind(Object(I.a)(Object(I.a)(n))),n.handleKeyboardUp=n.handleKeyboardUp.bind(Object(I.a)(Object(I.a)(n))),n._keyboardDown=!1,n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.id;(0,e.registerOutputs)(t,{CV:this._cv,Gate:this._gate}),document.addEventListener("keydown",this.handleKeyboardDown),document.addEventListener("keyup",this.handleKeyboardUp)}},{key:"handleKeyboardDown",value:function(e){var t=W.a(e.keyCode,Y);this._keyboardDown||-1===t||(this._keyboardDown=!0,this.handleKeyDown(J(t,this.props.octave)))}},{key:"handleKeyboardUp",value:function(){this._keyboardDown=!1,this.handleKeyUp()}},{key:"handleKeyDown",value:function(e){this.changeFrequency(e),this._gate.offset.value=1}},{key:"handleKeyUp",value:function(){this._gate.offset.value=0}},{key:"handleOctaveChange",value:function(e){var t=e.target.value,n=this.props,o=n.setOctave,a=n.octave,r=Number(t),c=this._cv.offset.value;this.changeFrequency(c+r-a),o(r)}},{key:"changeFrequency",value:function(e){this._cv.offset.value=e}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.connections,r=t.octave;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"\xb5Keyboard"),"Octave",a.a.createElement("select",{value:r,onChange:this.handleOctaveChange},a.a.createElement("option",{value:2},"-2"),a.a.createElement("option",{value:3},"-1"),a.a.createElement("option",{value:4},"0"),a.a.createElement("option",{value:5},"+1"),a.a.createElement("option",{value:6},"+2")),a.a.createElement("div",{style:{display:"grid"}},Q.map(function(t,n){var o=t.endsWith("#"),c=o?X[t]:n+1;return[a.a.createElement("div",{key:"TITLE_".concat(t).concat(n),style:{alignSelf:"center",gridRow:c,gridColumn:o?4:1}},t),a.a.createElement("button",{key:"".concat(t).concat(n),onMouseDown:function(t){t.stopPropagation(),e.handleKeyDown(J(n,r))},onMouseUp:e.handleKeyUp,style:{height:20,width:20,gridRow:c,alignSelf:"center",gridColumn:o?3:2,backgroundColor:o?"black":"white"}})]})),a.a.createElement("div",{style:{display:"flex",flex:1}},a.a.createElement(P,{portId:"CV",connections:o,moduleId:n,portType:"output"}),a.a.createElement(P,{portId:"Gate",connections:o,moduleId:n,portType:"output"})))}}]),t}(o.Component),$=Object(y.a)(Object(y.b)("isBrowserSupported",!0),Object(y.b)("panelWidth",6),Object(y.c)("octave","setOctave",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerOutputs:j}))(H),z=function(e){return 15*Math.pow(e,4)+.001},Z=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._adsr=e.audioContext.createConstantSource(),n._adsr.offset.value=-1,n._adsr.start(),n.handleGateInChange=n.handleGateInChange.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;o(n,{Gate:{connect:function(t){return e._gateInterval=N(t,e.handleGateInChange)},disconnect:function(){e._gateInterval&&(clearInterval(e._gateInterval),e._gateInterval=null)}}}),a(n,{Out:this._adsr})}},{key:"handleGateInChange",value:function(e){var t=this.props,n=t.sustain,o=t.audioContext,a=z(this.props.attack),r=z(this.props.decay),c=z(this.props.release),i=o.currentTime,u=this._adsr.offset;1===e?(u.cancelScheduledValues(0),u.linearRampToValueAtTime(-1,i+.01),u.linearRampToValueAtTime(0,i+a),u.linearRampToValueAtTime(n-1,i+a+r)):0===e&&(u.cancelScheduledValues(0),u.setValueAtTime(u.value,i),u.linearRampToValueAtTime(-1,i+c))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections,o=e.attack,r=e.setAttack,c=e.decay,i=e.setDecay,u=e.sustain,l=e.setSustain,d=e.release,s=e.setRelease;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"ADSR"),"Attack:",a.a.createElement(R,{min:0,max:1,step:.001,value:o,onChange:function(e){return r(e)},width:30,height:30}),"Decay:",a.a.createElement(R,{min:0,max:1,step:.001,value:c,onChange:function(e){return i(e)},width:30,height:30}),"Sustain:",a.a.createElement(R,{min:0,max:1,step:.01,value:u,onChange:function(e){return l(Number(e))},width:30,height:30}),"Release:",a.a.createElement(R,{min:0,max:1,step:.001,value:d,onChange:function(e){return s(Number(e))},width:30,height:30}),a.a.createElement(P,{portId:"Gate",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"Out",connections:n,moduleId:t,portType:"output"}))}}]),t}(o.Component),ee=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof ConstantSourceNode),Object(y.b)("panelWidth",6),Object(y.c)("attack","setAttack",.5),Object(y.c)("decay","setDecay",.5),Object(y.c)("sustain","setSustain",.5),Object(y.c)("release","setRelease",.5),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C,registerOutputs:j}))(Z),te=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._gain=e.audioContext.createGain(),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;t.audioContext;o(n,{In:{connect:function(t){return t.connect(e._gain)},disconnect:function(t){return t.disconnect(e._gain)}},CV:{connect:function(t){return t.connect(e._gain.gain)},disconnect:function(t){return t.disconnect(e._gain.gain)}}}),a(n,{Out:this._gain})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.connections;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"VCA"),a.a.createElement(P,{portId:"In",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"CV",connections:n,moduleId:t,portType:"input"}),a.a.createElement(P,{portId:"Out",connections:n,moduleId:t,portType:"output"}))}}]),t}(o.Component),ne=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof GainNode),Object(y.b)("panelWidth",4),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C,registerOutputs:j}))(te),oe=function(e){function t(e){var n;if(Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),!e.audioContext)throw new Error("audioContext property must be provided");return n._vcf=e.audioContext.createBiquadFilter(),n._vcf.type="lowpass",n.handleFrequencyChange=n.handleFrequencyChange.bind(Object(I.a)(Object(I.a)(n))),n.handleTypeChange=n.handleTypeChange.bind(Object(I.a)(Object(I.a)(n))),n.setPitch=n.setPitch.bind(Object(I.a)(Object(I.a)(n))),n.handleQChange=n.handleQChange.bind(Object(I.a)(Object(I.a)(n))),n.setQuality=n.setQuality.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.id,o=t.registerInputs,a=t.registerOutputs;o(n,{In:{connect:function(t){return t.connect(e._vcf)},disconnect:function(t){return t.disconnect(e._vcf)}}}),a(n,{Out:this._vcf})}},{key:"handleFrequencyChange",value:function(e){this.props.setFrequency(Number(e),this.setPitch)}},{key:"setPitch",value:function(){var e=this.props,t=e.frequency,n=e.audioContext,o=n.sampleRate/2,a=Math.log(o/40)/Math.LN2,r=Math.pow(2,a*(t-1));this._vcf.frequency.setValueAtTime(o*r,n.currentTime)}},{key:"handleQChange",value:function(e){this.props.setQ(Number(e),this.setQuality)}},{key:"handleTypeChange",value:function(e){var t=e.target.value;this.props.setType(t),this._vcf.type=t}},{key:"setQuality",value:function(){var e=this.props.q;this._vcf.Q.value=30*e}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.connections,r=t.type,c=t.frequency,i=t.q;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("span",null,"VCF"),"Shape:",a.a.createElement("select",{value:r,onChange:this.handleTypeChange},a.a.createElement("option",{value:"lowpass"},"Low Pass"),a.a.createElement("option",{value:"highpass"},"High Pass")),"Frequency:",a.a.createElement(R,{min:0,max:1,step:.01,value:c,onChange:function(t){return e.handleFrequencyChange(t)}}),"Q:",a.a.createElement(R,{min:0,max:1,step:.01,value:i,onChange:function(t){return e.handleQChange(t)}}),a.a.createElement(P,{portId:"In",connections:o,moduleId:n,portType:"input"}),a.a.createElement(P,{portId:"Out",connections:o,moduleId:n,portType:"output"}))}}]),t}(o.Component),ae=Object(y.a)(Object(y.b)("isBrowserSupported","undefined"!==typeof BiquadFilterNode),Object(y.b)("panelWidth",6),Object(y.c)("type","setType","lowpass"),Object(y.c)("frequency","setFrequency",.1),Object(y.c)("q","setQ",.5),Object(p.b)(function(e,t){return{connections:e.modules.connections[t.id]}},{connectModules:E,registerInputs:C,registerOutputs:j}))(oe),re={OSCILLATOR:"OSCILLATOR",STEREO_AUDIO_INTERFACE:"STEREO_AUDIO_INTERFACE",MONO_AUDIO_INTERFACE:"MONO_AUDIO_INTERFACE",KEYBOARD:"KEYBOARD",ADSR:"ADSR",VCF:"VCF",AMP:"AMP"},ce=O.a(v.a(1))(re),ie=n(78),ue=n(79),le=n(80),de=n(93),se=n(81),pe=n(94),he=n(40),me=n(92),fe=n(82),be=n(69),Oe=n(83),ve=n(68),Ie=n(84),ye=n(97),ge=n(41),Ee=ie.a(function(e,t){var n=e.moduleId,o=e.portId;return ue.a(le.a(de.a(se.a),[n,o]),pe.a(he.a([n,o]),function(e){return me.a([e.moduleId,e.portId],t)}))(t)}),Ce=Object(b.a)((U={},Object(f.a)(U,"ADD_MODULE",function(e,t){var n=t.moduleType,o=function(e){var t=e.type,n=e.id,o={id:(void 0===n?void 0:n)||"".concat(t).concat(ce[t])};switch(t){case re.OSCILLATOR:o.Module=V;break;case re.STEREO_AUDIO_INTERFACE:o.Module=q;break;case re.MONO_AUDIO_INTERFACE:o.Module=G;break;case re.KEYBOARD:o.Module=$;break;case re.ADSR:o.Module=ee;break;case re.VCF:o.Module=ae;break;case re.AMP:o.Module=ne;break;default:throw new Error("Cannot create module of type: ".concat(t))}return o.Module.isBrowserSupported?(o.width=20*o.Module.panelWidth,ce[t]++,o):null}({type:n,id:t.id});return o?(o.left=e.maxLeft,fe.a({modules:be.a(o.id,o),connections:be.a(o.id,{}),maxLeft:Oe.a(o.width)})(e)):(window.alert("Your browser doesn't support this module: ".concat(n)),e)}),Object(f.a)(U,"REGISTER_INPUTS",function(e,t){var n=t.id,o=t.inputs;return fe.a({modules:fe.a(Object(f.a)({},n,be.a("inputs",o)))})(e)}),Object(f.a)(U,"REGISTER_OUTPUTS",function(e,t){var n=t.id,o=t.outputs;return fe.a({modules:fe.a(Object(f.a)({},n,be.a("outputs",o)))})(e)}),Object(f.a)(U,"CONNECT_MODULES",function(e,t){var n,o=t.input,a=t.output;return fe.a({connections:pe.a(Ee(a),Ee(o),fe.a((n={},Object(f.a)(n,o.moduleId,be.a(o.portId,{moduleId:a.moduleId,portId:a.portId})),Object(f.a)(n,a.moduleId,be.a(a.portId,{moduleId:o.moduleId,portId:o.portId})),n)))})(e)}),Object(f.a)(U,"DISCONNECT_MODULE",function(e,t){var n=t.port;return fe.a({connections:pe.a(Ee(n),fe.a(Object(f.a)({},n.moduleId,ve.a(n.portId))))})(e)}),Object(f.a)(U,"SET_STARTING_PORT",function(e,t){var n=t.port;return fe.a({startingPort:v.a(n)})(e)}),Object(f.a)(U,"UNSET_STARTING_PORT",function(e){return fe.a({startingPort:v.a(null)})(e)}),Object(f.a)(U,"MOVE_MODULE",function(e,t){var n=t.moduleId,o=t.x,a=e.modules[n].left,r=e.modules[n].width,c=a+20*Math.floor((o-a)/20),i=c+r;return pe.a(Ie.a,ye.a(function(e){var t=e.id,o=e.left,a=o+e.width;return t!==n&&(o>=c&&o<i||o<c&&a>c||o===c&&a===i)}))(e.modules)?e:fe.a({modules:fe.a(Object(f.a)({},n,fe.a({left:v.a(c)}))),maxLeft:ge.a(c+e.modules[n].width)})(e)}),U),{modules:{},connections:{},startingPort:null,maxLeft:20}),je=n(101),Me=n(85),_e=n(86),we=n(87),Te=n(96),Ae=n(88),ke=n(98),De=function(e){return fe.a({x:Oe.a(e)})},xe=Object(b.a)((L={},Object(f.a)(L,"ADD_CABLE",function(e,t){var n=t.portId,o=t.fromPoint,a=t.color;return fe.a({cables:be.a(n,{portId:n,fromPoint:o,toPoint:o,color:a})})(e)}),Object(f.a)(L,"MODIFY_CABLE",function(e,t){var n=t.portId,o=t.toPoint,a=t.toPortId;return fe.a({cables:fe.a(Object(f.a)({},n,je.a(Me.a,{toPoint:o,toPortId:a})))})(e)}),Object(f.a)(L,"REMOVE_CABLE",function(e,t){var n=t.portId;return fe.a({cables:ve.a(n)})(e)}),Object(f.a)(L,"MODIFY_MODULE_CABLES",function(e,t){var n=t.moduleId,o=t.diff;return fe.a({cables:O.a(_e.a([[we.a({portId:Te.a(n)}),fe.a({fromPoint:De(o)})],[we.a({toPortId:Te.a(n)}),fe.a({toPoint:De(o)})],[Ae.a,ke.a]]))})(e)}),L),{cables:{}}),Pe=Object(h.c)({modules:Ce,cables:xe}),Se=n(89),Re=function(e){var t=e.getState;return function(e){return function(n){switch(n.type){case"CONNECT_MODULES":var o=t().modules,a=o.modules,r=o.connections,c=he.a([n.input.moduleId,"inputs",n.input.portId])(a),i=he.a([n.output.moduleId,"outputs",n.output.portId])(a);pe.a(he.a([n.output.moduleId,n.output.portId]),Se.a(se.a,pe.a(function(e){var t=e.moduleId,n=e.portId;return he.a([t,"inputs",n])(a)},function(e){return e.disconnect(i)})))(r),pe.a(he.a([n.input.moduleId,n.input.portId]),Se.a(se.a,pe.a(function(e){var t=e.moduleId,n=e.portId;return he.a([t,"outputs",n])(a)},function(e){return c.disconnect(e)})))(r),c.connect(i);break;case"DISCONNECT_MODULE":var u=t().modules,l=u.modules,d=u.connections,s=he.a([n.port.moduleId,"inputs",n.port.portId])(l);if(s)pe.a(he.a([n.port.moduleId,n.port.portId]),function(e){var t=e.moduleId,n=e.portId;return he.a([t,"outputs",n])(l)},function(e){return s.disconnect(e)})(d);else{var p=he.a([n.port.moduleId,"outputs",n.port.portId])(l);pe.a(he.a([n.port.moduleId,n.port.portId]),function(e){var t=e.moduleId,n=e.portId;return he.a([t,"inputs",n])(l)},function(e){return e.disconnect(p)})(d)}}return e(n)}}},Ne=[m.a,Re],Ue=Object(h.d)(Pe,h.a.apply(void 0,Ne)),Le=n(99),Fe=n(42),Ve=Object(p.b)(null,{addModule:g})(function(e){var t=e.addModule;return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return t(re.KEYBOARD)}},"Add Keyboard"),a.a.createElement("button",{onClick:function(){return t(re.OSCILLATOR)}},"Add Oscillator"),a.a.createElement("button",{onClick:function(){return t(re.AMP)}},"Add Amplifier"),a.a.createElement("button",{onClick:function(){return t(re.ADSR)}},"Add ADSR"),a.a.createElement("button",{onClick:function(){return t(re.VCF)}},"Add VCF"),a.a.createElement("button",{onClick:function(){return t(re.STEREO_AUDIO_INTERFACE)}},"Add Stereo Audio Interface"),a.a.createElement("button",{onClick:function(){return t(re.MONO_AUDIO_INTERFACE)}},"Add Mono Audio Interface"))}),Be=function(e){var t=e.fromPoint,n=e.toPoint,o=e.color;return a.a.createElement("path",{d:"M".concat(t.x," ").concat(t.y," q ").concat(function(e,t){var n=e.y>t.y?e:t,o=e.y<t.y?e:t,a=.1*Math.abs(t.x-e.x)+Math.abs(e.y-t.y)/.4,r=.5+Math.log(1+Math.abs((t.y-e.y)/(t.x-e.x)))/(3*Math.log(2));r=n.x<o.x?1-r:r;var c=(e.x<t.x?1:-1)*r*Math.abs(e.x-t.x)||e.x;return"".concat(c," ").concat(a)}(t,n)," ").concat(n.x-t.x," ").concat(n.y-t.y),stroke:o,fill:"transparent",strokeWidth:6})},qe=Object(p.b)(function(e){var t=e.cables;return{cables:Ie.a(t.cables)}},{})(function(e){var t=e.cables;return a.a.createElement("svg",{style:{position:"fixed",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none"}},t.map(function(e){var t=e.portId,n=e.fromPoint,o=e.toPoint,r=e.color;return a.a.createElement(Be,{key:t,fromPoint:n,toPoint:o,color:r})}))}),Ke=n(33),Ge={Basic:{modules:[{type:re.KEYBOARD,id:"KEYBOARD1"},{type:re.OSCILLATOR,id:"OSCILLATOR1"},{type:re.ADSR,id:"ADSR1"},{type:re.AMP,id:"AMP1"},{type:re.MONO_AUDIO_INTERFACE,id:"MONO_AUDIO_INTERFACE1"}],connections:[{input:{moduleId:"OSCILLATOR1",portId:"V/Oct"},output:{moduleId:"KEYBOARD1",portId:"CV"}},{input:{moduleId:"ADSR1",portId:"Gate"},output:{moduleId:"KEYBOARD1",portId:"Gate"}},{input:{moduleId:"AMP1",portId:"In"},output:{moduleId:"OSCILLATOR1",portId:"Out"}},{input:{moduleId:"AMP1",portId:"CV"},output:{moduleId:"ADSR1",portId:"Out"}},{input:{moduleId:"MONO_AUDIO_INTERFACE1",portId:"In"},output:{moduleId:"AMP1",portId:"Out"}}]}},We=n(95),Ye=n(90),Qe=ie.a(function(e,t,n){var o=t().modules,a=n.input,r=n.output;if(We.a([he.a([a.moduleId,"inputs",a.portId]),he.a([r.moduleId,"outputs",r.portId])])(o.modules)){e(E(n));var c="".concat(a.moduleId,"-").concat(a.portId),i=document.getElementById(c).getBoundingClientRect();e(_({portId:c,color:x()({luminosity:"dark"}),fromPoint:{x:i.x+i.width/2,y:i.y+i.height/2}}));var u=document.getElementById("".concat(r.moduleId,"-").concat(r.portId)).getBoundingClientRect();e(w({portId:c,toPortId:"".concat(r.moduleId,"-").concat(r.portId),toPoint:{x:u.x+u.width/2,y:u.y+u.height/2}}))}else setTimeout(function(){return Qe(e,t,n)},0)}),Xe=Object(y.a)(Object(y.c)("preset","setPreset",""),Object(p.b)(null,{loadPreset:function(e){return function(t,n){Ye.a(function(e){return t(g(e.type,e.id))})(e.modules),Ye.a(Qe(t,n))(e.connections)}}}))(function(e){var t=e.preset,n=e.setPreset,o=e.loadPreset;return a.a.createElement("div",null,a.a.createElement("select",{value:t,onChange:function(e){var t=e.target.value;n(t),o(Ge[t])}},""===t&&a.a.createElement("option",{value:""},"Select Preset"),pe.a(Ke.a,O.a(function(e){return a.a.createElement("option",{key:e,value:e},e)}))(Ge)))}),Je=(n(70),n(72),function(){return a.a.createElement("img",{alt:"screw",src:n(74),height:14,width:14,style:{margin:5}})}),He=function(e){var t=e.children;return a.a.createElement("div",{className:"panel_edge"},a.a.createElement(Je,null),t,a.a.createElement(Je,null))},$e=function(e){var t=e.children,n=e.dragging,o=e.setDragging,r=e.width,c=e.left;return a.a.createElement("div",{className:"module-panel",style:{width:r,left:c,cursor:n?"grabbing":"grab"},onMouseDown:function(){return o(!0)},onMouseUp:function(){return o(!1)}},a.a.createElement(He,null),a.a.createElement("div",{className:"panel_content"},t),a.a.createElement(He,null))},ze=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e));var o=window.AudioContext||window.webkitAudioContext;return n._audioContext=new o,n.handleMouseUp=n.handleMouseUp.bind(Object(I.a)(Object(I.a)(n))),n.handleMouseMove=n.handleMouseMove.bind(Object(I.a)(Object(I.a)(n))),n.handleDragging=n.handleDragging.bind(Object(I.a)(Object(I.a)(n))),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){var t,n=this.props,o=n.modules,a=n.modifyModuleCables,r=Le.a(function(n){var o=n.id,a=n.left;return t=Le.a(we.a({id:Fe.a(o),left:de.a(Fe.a(a))}))(e.modules),!se.a(t)})(o);r&&a({moduleId:r.id,diff:r.left-t.left})}},{key:"handleMouseUp",value:function(){var e=this.props,t=e.unsetStartingPort,n=e.removeCable,o=e.startingPort;o&&(n("".concat(o.moduleId,"-").concat(o.portId)),t())}},{key:"handleMouseMove",value:function(e){this.moveCable(e),this.dragModule(e)}},{key:"moveCable",value:function(e){var t=this.props,n=t.modifyCable,o=t.startingPort;o&&n({portId:"".concat(o.moduleId,"-").concat(o.portId),toPoint:{x:e.clientX,y:e.clientY}})}},{key:"dragModule",value:function(e){var t=this.props,n=t.draggingModuleId,o=t.moveModule;n&&o(n,e.clientX)}},{key:"handleDragging",value:function(e){var t=this;return function(n){t.props.setDraggingModuleId(n?e:null)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.modules,o=t.draggingModuleId;return a.a.createElement("div",{onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove},a.a.createElement(Ve,null),a.a.createElement(Xe,null),a.a.createElement("div",null,a.a.createElement("div",{className:"rack"},n.map(function(t){var n=t.Module,r=t.id,c=t.width,i=t.left;return a.a.createElement($e,{key:r,setDragging:e.handleDragging(r),dragging:r===o,width:c,left:i},a.a.createElement(n,{id:r,audioContext:e._audioContext}))})),a.a.createElement(qe,null)))}}]),t}(o.Component),Ze=Object(y.a)(Object(y.c)("draggingModuleId","setDraggingModuleId",null),Object(p.b)(function(e){return{modules:Ie.a(e.modules.modules),startingPort:e.modules.startingPort}},{modifyCable:w,removeCable:T,unsetStartingPort:M,moveModule:function(e,t){return{type:"MOVE_MODULE",moduleId:e,x:t}},modifyModuleCables:function(e){return{type:"MODIFY_MODULE_CABLES",moduleId:e.moduleId,diff:e.diff}}}))(ze),et=(n(75),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(p.a,{store:Ue},a.a.createElement("div",{className:"App"},a.a.createElement(Ze,null)))}}]),t}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,2,1]]]);
//# sourceMappingURL=main.de310183.chunk.js.map