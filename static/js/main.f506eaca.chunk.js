(this.webpackJsonpmodularsynthjs=this.webpackJsonpmodularsynthjs||[]).push([[0],{141:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){e.exports=n.p+"static/media/screw_header.2c2805d6.svg"},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(34),r=n.n(c),u=(n(77),n(51)),i=n(52),l=n(70),d=n(68),s=n(7),f=n(25),p=n(54),m=n(9),v=n(4),b=n(167),O=n(24),E=n(61),I=n(3),h=n(152),j=n(170),g=n(16),y=n(69),C=n(39),w=n(148),S=n(149),T=n(171),A=function(e){return{type:"ADD_CABLE",portId:e.portId,fromPoint:e.fromPoint,color:e.color}},x=function(e){return{type:"MODIFY_CABLE",portId:e.portId,fromPoint:e.fromPoint,toPoint:e.toPoint,toPortId:e.toPortId}},k=function(e){return{type:"REMOVE_CABLE",portId:e}},P=function(e){return{type:"CHANGE_OVER_PORT",portId:e}},M=function(e,t,n){return{type:"ADD_MODULE",moduleType:e,id:t,rackId:n}},D=function(e){return{type:"CONNECT_MODULES",output:e.output,input:e.input}},R=function(e){return{type:"DISCONNECT_MODULE",port:e}},_=function(e,t){return{type:"REGISTER_INPUTS",id:e,inputs:t}},L=function(e,t){return{type:"REGISTER_OUTPUTS",id:e,outputs:t}},V=function(e){return{type:"SET_STARTING_PORT",port:e}},N=function(){return{type:"UNSET_STARTING_PORT"}},B=function(e,t,n){return{type:"MOVE_MODULE",moduleId:e,x:t,rackId:n}},F=function(e){return function(t,n){var o=n(),a=o.modules,c=a.modules,r=a.connections,u=o.cables.cables,i=c[e];if(i){var l=j.a(g.a,y.a((function(t){return C.a([e,t],r)})),w.a((function(n){t(R({moduleId:e,portId:n}));var o="".concat(e,"-").concat(n);u[o]||(o=j.a(y.a(S.a("toPortId",o)),g.a,T.a)(u)),t(k(o))})));i.inputs&&l(i.inputs),i.outputs&&l(i.outputs),t({type:"REMOVE_MODULE",moduleId:e})}}},G=n(150),U=n(172),W=n(173),z=n(151),q=n(55),Y=n.n(q),H=n(41),K=n.n(H);n(83);function X(e){var t=Object(s.b)();return Object(o.useCallback)(j.a(e,t),[e,t])}var J="HIDE",Q="ABOVE",$="BELOW",Z=function(e){var t=e.label,c=e.labelPosition,r=void 0===c?Q:c,u=e.portId,i=e.moduleId,l=e.portType,d=Object(s.c)(C.a(["modules","startingPort"])),f=Object(s.c)(C.a(["modules","connections",i,u])),p=Object(s.c)(j.a(C.a(["cables","cables"]),G.a)),m=X(D),b=X(R),O=X(V),E=X(N),I=X(A),h=X(k),g=X(x),y=X(P),w=Object(o.useMemo)((function(){return"".concat(i,"-").concat(u)}),[i,u]),S=Object(o.useRef)(null);Object(o.useEffect)((function(){var e=U.a(W.a({portId:w}),p);if(e){var t=S.current.getBoundingClientRect(),n=t.x,o=t.y,a=t.width,c=t.height;g({portId:e.portId,fromPoint:{x:n+a/2,y:o+window.scrollY+c/2}})}else{var r=U.a(W.a({toPortId:w}),p);if(r){var u=S.current.getBoundingClientRect(),i=u.x,l=u.y,d=u.width,s=u.height;g({portId:r.portId,toPoint:{x:i+d/2,y:l+window.scrollY+s/2}})}}}),[f]);var T=z.a(t)?u:t;return a.a.createElement("div",{className:Y()("port",{disabled:d&&d.portType===l}),onMouseDown:function(e){e.stopPropagation();var t={portId:u,portType:l,moduleId:i};f&&(b({moduleId:i,portId:u}),h("".concat(f.moduleId,"-").concat(f.portId))),O(t);var n=S.current.getBoundingClientRect(),o=n.x,a=n.y,c=n.width,r=n.height;I({portId:w,fromPoint:{x:o+c/2,y:a+window.scrollY+r/2},color:K()({luminosity:"dark"})})},onMouseUp:function(e){var t;if(E(),d&&d.portType!==l&&(d.moduleId!==i||d.id!==u)){e.stopPropagation();var n=S.current.getBoundingClientRect(),o=n.x,a=n.y,c=n.width,r=n.height;!f||f.moduleId===d.moduleId&&f.portId===d.portId||(h("".concat(f.moduleId,"-").concat(f.portId)),h(w)),g({portId:"".concat(d.moduleId,"-").concat(d.portId),toPoint:{x:o+c/2,y:a+r/2},toPortId:w}),m((t={},Object(v.a)(t,d.portType,d),Object(v.a)(t,l,{moduleId:i,portId:u}),t))}}},r===Q&&T,a.a.createElement("img",{id:w,height:"30",width:"30",ref:S,onMouseEnter:function(){return y(w)},onMouseLeave:function(){return y(null)},onMouseDown:function(e){return e.preventDefault()},src:n(84),alt:w}),r===$&&T)},ee=function(e){var t=e.onChange,c=e.max,r=e.min,u=e.value,i=e.step,l=e.label,d=e.height,s=void 0===d?50:d,f=e.width,p=void 0===f?50:f,m=Object(o.useState)(!1),v=Object(I.a)(m,2),b=v[0],O=v[1],E=Object(o.useRef)(null),h=Object(o.useCallback)((function(e){if(b&&(e.stopPropagation(),e.preventDefault(),1===e.buttons)){var n=E.current.getBoundingClientRect(),o=n.x,a=n.y,u=o+n.width/2,l=a+n.height/2,d=e.clientX-u,s=e.clientY-l,f=180*Math.atan2(s,d)/Math.PI;f<0&&(f+=360),(f-=120)<0&&(f+=360),f>315&&(f=0);var p=f/300*(c-r)+r;(p=Math.floor(p/i)*i)>c&&(p=c),t(p)}}),[b,r,c,t,i]),j=Object(o.useCallback)((function(e){e.stopPropagation(),O(!0)}),[]),g=Object(o.useCallback)((function(){O(!1)}),[]),y=Object(o.useCallback)((function(){return 2*((u-r)/(c-r))*150}),[r,c,u]);return Object(o.useEffect)((function(){return document.addEventListener("mouseup",g),document.addEventListener("mousemove",h),function(){document.removeEventListener("mouseup",g),document.removeEventListener("mousemove",h)}}),[g,h]),a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l,a.a.createElement("img",{ref:E,style:{cursor:"pointer",margin:"auto",transform:"rotate(".concat(y(),"deg)")},onMouseDown:j,alt:"knob",src:n(85),height:s,width:p}))},te=n(13),ne=n(14),oe=n(59);function ae(){var e=Object(te.a)(["\n    grid-column: ",";\n    grid-row: ",";\n"]);return ae=function(){return e},e}function ce(){var e=Object(te.a)(["\n    display: grid;\n    flex: 1;\n    margin-top: ","px;\n    margin-bottom: ","px;\n    margin-left: ","px;\n    margin-right: ","px;\n"]);return ce=function(){return e},e}function re(){var e=Object(te.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100%\n"]);return re=function(){return e},e}var ue=ne.b.div(re()),ie=ne.b.div(ce(),Object(oe.a)("marginTop"),Object(oe.a)("marginBottom"),Object(oe.a)("marginLeft"),Object(oe.a)("marginRight")),le=ne.b.div(ae(),Object(oe.a)("column"),Object(oe.a)("row")),de={container:{display:"flex",flexDirection:"column",height:"100%"},body:{display:"flex",flexDirection:"column",flex:1,justifyContent:"space-evenly"},spaceAround:{display:"flex",justifyContent:"space-around"}},se=n(174),fe=n(175),pe={};function me(e,t){var n=Object(o.useState)(null),a=Object(I.a)(n,2),c=a[0],r=a[1],u=Object(s.c)(j.a(C.a(["modules","modules"]),g.a));return Object(o.useEffect)((function(){j.a(se.a(fe.a,[E.a(u),g.a]),w.a((function(e){return delete pe[e]})))(pe)}),[u]),Object(o.useEffect)((function(){console.debug("useModule rendered for ".concat(e));var n=pe[e];if(z.a(n)){var o=t();o.id=e,pe[e]=o,r(o)}else r(n)}),[e,t]),c}function ve(e,t){var n=Object(o.useRef)(t),a=Object(o.useState)(null),c=Object(I.a)(a,2),r=c[0],u=c[1];return Object(o.useEffect)((function(){return n.current=t}),[t]),Object(o.useEffect)((function(){if(e){var t=function(e){for(var t in e)if(e[t]instanceof AudioParam)return e[t];return null}(e);if(t){var o=t.value;n.current(o),u(setInterval((function(){o!==t.value&&(o=t.value,n.current(o))}),0))}}}),[e]),r}function be(e){return Object(s.c)(C.a(["modules","connections",e]))}var Oe=function(e,t){var n=e.createOscillator();return n.type=t,n.frequency.value=0,n},Ee=function(e){var t=e.id,c=e.audioContext,r=X(_),u=X(L),i=Object(o.useState)(0),l=Object(I.a)(i,2),d=l[0],s=l[1],f=Object(o.useState)(0),p=Object(I.a)(f,2),v=p[0],b=p[1],E=Object(o.useState)(0),y=Object(I.a)(E,2),C=y[0],w=y[1],S=Object(o.useState)(0),T=Object(I.a)(S,2),A=T[0],x=T[1],k=Object(o.useState)(0),P=Object(I.a)(k,2),M=P[0],D=P[1],R=Object(o.useCallback)((function(){var e=c.createPulseOscillator();e.frequency.value=0,e.width.value=0;var t={Sawtooth:Oe(c,"sawtooth"),Pulse:e,Triangle:Oe(c,"triangle"),Sine:Oe(c,"sine")},n=c.createVoltToHzConverter(440,4),o=c.createConstantSource();n.volt.value=0,o.offset.value=0;var a=c.createGain();a.gain.value=0,a.connect(n.volt),h.a((function(e){return n.connect(e.frequency)}))(t),h.a((function(e){return o.connect(e.detune)}))(t);var r=c.createGain();return r.gain.value=0,r.connect(t.Pulse.width),h.a((function(e){return e.start()}))(t),n.start(),o.start(),{oscillators:t,frequencyControl:n,detuneControl:o,fmGain:a,pwCvGain:r}}),[c]),V=me(t,R);Object(o.useEffect)((function(){V&&(r(t,{"V/Oct":{connect:function(e){return e.connect(V.frequencyControl.volt)},disconnect:function(e){return e.disconnect(V.frequencyControl.volt)}},PWM:{connect:function(e){return e.connect(V.pwCvGain)},disconnect:function(e){return e.disconnect(V.pwCvGain)}},FM:{connect:function(e){return e.connect(V.fmGain)},disconnect:function(e){return e.disconnect(V.fmGain)}}}),u(t,{Sawtooth:V.oscillators.Sawtooth,Pulse:V.oscillators.Pulse,Triangle:V.oscillators.Triangle,Sine:V.oscillators.Sine}))}),[V,t,r,u]);var N=Object(o.useCallback)((function(e){s(e),V.frequencyControl.volt.value=e}),[V]),B=Object(o.useCallback)((function(e){b(e),V.detuneControl.offset.value=e}),[V]),F=Object(o.useCallback)((function(e){w(e),V.oscillators.Pulse.width.value=e}),[V]),G=Object(o.useCallback)((function(e){x(e),V.pwCvGain.gain.value=e/10}),[V]),U=Object(o.useCallback)((function(e){D(e),V.fmGain.gain.value=e}),[V]);return a.a.createElement("div",{style:de.container},a.a.createElement("span",null,"VCO"),a.a.createElement("div",{style:Object(m.a)({},de.body,{justifyContent:"space-between"})},a.a.createElement("div",{style:de.spaceAround},a.a.createElement("div",{style:Object(m.a)({},de.spaceAround,{flexDirection:"column"})},a.a.createElement(Z,{portId:"V/Oct",moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"FM",moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"PWM",moduleId:t,portType:"input"})),a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(ee,{label:"Range",min:-4,max:4,step:.001,value:d,width:30,height:30,onChange:N}),a.a.createElement(ee,{label:"Tune",min:-600,max:600,step:1,value:v,width:30,height:30,onChange:B}),a.a.createElement(ee,{label:"FM CV",min:0,max:1,step:.005,value:M,width:30,height:30,onChange:U}),a.a.createElement(ee,{label:"PW",min:-1,max:1,step:.001,value:C,width:30,height:30,onChange:F}),a.a.createElement(ee,{label:"PWM CV",min:0,max:1,step:.005,value:A,width:30,height:30,onChange:G}))),a.a.createElement("div",{style:de.spaceAround},V&&j.a(g.a,O.a((function(e){return a.a.createElement(Z,{key:e,label:a.a.createElement("img",{width:25,src:n(49)("./".concat(e.toLowerCase(),".svg")),alt:e}),labelPosition:$,portId:e,moduleId:t,portType:"output"})})))(V.oscillators))))};Ee.isBrowserSupported="undefined"!==typeof OscillatorNode&&"undefined"!==typeof ConstantSourceNode,Ee.panelWidth=8;var Ie=Ee,he=function(e){var t=e.id,n=e.audioContext,c=be(t),r=X(_),u=Object(o.useCallback)((function(){var e=new StereoPannerNode(n,{pan:-1}),t=new StereoPannerNode(n,{pan:1});return e.connect(n.destination),t.connect(n.destination),{leftPanner:e,rightPanner:t}}),[n]),i=me(t,u);return Object(o.useEffect)((function(){i&&r(t,{Left:{connect:function(e){return e.connect(i.leftPanner)},disconnect:function(e){return e.disconnect(i.leftPanner)}},Right:{connect:function(e){return e.connect(i.rightPanner)},disconnect:function(e){return e.disconnect(i.rightPanner)}}})}),[i,t,r]),a.a.createElement("div",{style:de.container},a.a.createElement("span",null,"Stereo"),a.a.createElement("div",{style:de.body},a.a.createElement(Z,{portId:"Left",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"Right",connections:c,moduleId:t,portType:"input"})))};he.isBrowserSupported="undefined"!==typeof StereoPannerNode,he.panelWidth=4;var je=he,ge=function(e){var t=e.id,n=e.audioContext,c=be(t),r=X(_);return Object(o.useEffect)((function(){r(t,{In:{connect:function(e){return e.connect(n.destination)},disconnect:function(e){return e.disconnect(n.destination)}}})}),[t,r,n]),a.a.createElement("div",{style:de.container},a.a.createElement("span",null,"Mono"),a.a.createElement("div",{style:de.body},a.a.createElement(Z,{portId:"In",connections:c,moduleId:t,portType:"input"})))};ge.isBrowserSupported=!0,ge.panelWidth=4;var ye=ge,Ce=n(153),we=n(176);function Se(){var e=Object(te.a)(["left: ","px;"]);return Se=function(){return e},e}function Te(){var e=Object(te.a)(["top: ","px;"]);return Te=function(){return e},e}function Ae(){var e=Object(te.a)(["        \n    width: ","px;\n    height: ","px;\n    background-color: gray;\n    position: absolute;\n    transition: "," .2s;\n    ","\n"]);return Ae=function(){return e},e}function xe(){var e=Object(te.a)(["\n    background-color: black;\n    width: ","px;\n    height: ","px;\n    cursor: pointer;\n    position: relative;\n"]);return xe=function(){return e},e}function ke(){var e=Object(te.a)(["\n    font-size: 10px; \n    flex: 1;\n"]);return ke=function(){return e},e}function Pe(){var e=Object(te.a)(["width: ","px;"]);return Pe=function(){return e},e}function Me(){var e=Object(te.a)(["height: ","px;"]);return Me=function(){return e},e}function De(){var e=Object(te.a)(["\n    display: flex;\n    flex-direction: ",";\n    justify-content: space-between;\n    ","\n"]);return De=function(){return e},e}function Re(){var e=Object(te.a)(["\n    display: flex;\n    flex-direction: ",";\n    align-items: center;\n    justify-content: center;\n"]);return Re=function(){return e},e}var _e=ne.b.div(Re(),(function(e){return e.vertical?"row":"column"})),Le=ne.b.div(De(),(function(e){return e.vertical?"column":"row"}),(function(e){var t=e.vertical,n=e.size;return t?Object(ne.a)(Me(),n+10):Object(ne.a)(Pe(),n+10)})),Ve=ne.b.span(ke()),Ne=ne.b.div(xe(),(function(e){var t=e.vertical,n=e.size;return t?10:n}),(function(e){var t=e.vertical,n=e.size;return t?n:10})),Be=ne.b.div(Ae(),(function(e){var t=e.vertical,n=e.handlerSize;return t?10:n}),(function(e){var t=e.vertical,n=e.handlerSize;return t?n:10}),(function(e){return e.vertical?"top":"left"}),(function(e){var t=e.vertical,n=e.position;return t?Object(ne.a)(Te(),n):Object(ne.a)(Se(),n)})),Fe=function(e){var t=e.value,n=e.onChange,c=e.options,r=e.vertical,u=void 0!==r&&r,i=e.size,l=void 0===i?30:i,d=e.handlerSize,s=void 0===d?5:d,f=Object(o.useState)(0),p=Object(I.a)(f,2),m=p[0],v=p[1],b=Object(o.useState)(!1),O=Object(I.a)(b,2),E=O[0],h=O[1],j=Object(o.useRef)(null),g=Object(o.useMemo)((function(){for(var e=[s/2],t=1;t<c.length-1;t++)e.push(l/(c.length-1)*t);return e.push(l-s/2),e}),[c,l,s]);Object(o.useEffect)((function(){var e=we.a(W.a({value:t}),c)*(l/(c.length-1))-s/2;e=Math.min(Math.max(0,e),l-s),v(e)}),[t,c,l,s]);var y=Object(o.useCallback)((function(e){var t=e[u?"clientY":"clientX"]-j.current.getBoundingClientRect()[u?"y":"x"],o=we.a((function(e){return Math.abs(t-e)<=s/2}),g);-1!==o&&n(c[o].value)}),[g,s,n,c]),C=Object(o.useCallback)((function(e){e.stopPropagation(),y(e)}),[y]),w=Object(o.useCallback)((function(e){e.stopPropagation(),h(!0)}),[]),S=Object(o.useCallback)((function(){h(!1)}),[]),T=Object(o.useCallback)((function(e){E&&(e.stopPropagation(),e.preventDefault(),y(e))}),[E,y]);return Object(o.useEffect)((function(){return document.addEventListener("mouseup",S),document.addEventListener("mousemove",T),function(){document.removeEventListener("mouseup",S),document.removeEventListener("mousemove",T)}}),[S,T]),a.a.createElement(_e,{vertical:u},a.a.createElement(Le,{size:l,vertical:u},c.map((function(e){var t=e.value,n=e.label;return a.a.createElement(Ve,{key:t},n)}))),a.a.createElement(Ne,{size:l,vertical:u,onMouseDown:C,ref:j},a.a.createElement(Be,{position:m,vertical:u,handlerSize:s,onMouseDown:w})))},Ge=[90,83,88,68,67,86,71,66,72,78,74,77,188],Ue=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C"],We={"C#":"1/4","D#":"3/6","F#":"6/9","G#":"8/11","A#":"10/13"},ze=function(e,t){return t-5+(e+3)/12},qe=function(e){var t=e.id,n=e.audioContext,c=be(t),r=X(L),u=Object(o.useState)(4),i=Object(I.a)(u,2),l=i[0],d=i[1],s=Object(o.useState)(0),f=Object(I.a)(s,2),p=f[0],m=f[1],v=Object(o.useState)(!1),b=Object(I.a)(v,2),O=b[0],E=b[1],h=Object(o.useCallback)((function(){var e=n.createConstantSource();e.offset.value=0,e.start();var t=n.createConstantSource();return t.offset.value=0,t.start(),{gate:e,cv:t}}),[n]),j=me(t,h);Object(o.useEffect)((function(){j&&r(t,{CV:j.cv,Gate:j.gate})}),[t,j,r]),Object(o.useEffect)((function(){j&&(j.cv.offset.value=p)}),[j,p]);var g=Object(o.useCallback)((function(e){m(e),j.gate.offset.value=1}),[j]),y=Object(o.useCallback)((function(){j.gate.offset.value=0}),[j]),C=Object(o.useCallback)((function(e){var t=Ce.a(e.keyCode,Ge);O||-1===t||(E(!1),g(ze(t,l)))}),[O,g,l]),w=Object(o.useCallback)((function(){E(!1),y()}),[y]);Object(o.useEffect)((function(){document.onkeydown=C,document.onkeyup=w}),[C,w]);var S=Object(o.useCallback)((function(e){var t=j.cv.offset.value;m(t+e-l),d(e)}),[j,l]);return a.a.createElement("div",{style:de.container},a.a.createElement("span",null,"\xb5Keyboard"),a.a.createElement("div",{style:de.body},"Octave",a.a.createElement(Fe,{value:l,onChange:S,size:60,options:[{value:2,label:"-2"},{value:3,label:"-1"},{value:4,label:"0"},{value:5,label:"+1"},{value:6,label:"+2"}]}),a.a.createElement("div",{style:{display:"grid",flex:1}},Ue.map((function(e,t){var n=e.endsWith("#"),o=n?We[e]:t+1;return[a.a.createElement("div",{key:"TITLE_".concat(e).concat(t),style:{alignSelf:"center",gridRow:o,gridColumn:n?4:1}},e),a.a.createElement("button",{key:"".concat(e).concat(t),onMouseDown:function(e){e.stopPropagation(),g(ze(t,l))},onMouseUp:y,style:{height:20,width:20,gridRow:o,alignSelf:"center",gridColumn:n?3:2,backgroundColor:n?"black":"white"}})]}))),a.a.createElement("div",{style:de.spaceAround},a.a.createElement(Z,{portId:"CV",connections:c,moduleId:t,portType:"output"}),a.a.createElement(Z,{portId:"Gate",connections:c,moduleId:t,portType:"output"}))))};qe.isBrowserSupported="undefined"!==typeof ConstantSourceNode,qe.panelWidth=6;var Ye=qe,He=function(e){return 15*Math.pow(e,4)+.001},Ke=function(e){var t=e.id,n=e.audioContext,c=be(t),r=X(_),u=X(L),i=Object(o.useState)(null),l=Object(I.a)(i,2),d=l[0],s=l[1],f=Object(o.useState)(.5),p=Object(I.a)(f,2),m=p[0],v=p[1],b=Object(o.useState)(.5),O=Object(I.a)(b,2),E=O[0],h=O[1],j=Object(o.useState)(.5),g=Object(I.a)(j,2),y=g[0],C=g[1],w=Object(o.useState)(.5),S=Object(I.a)(w,2),T=S[0],A=S[1],x=Object(o.useCallback)((function(){var e=n.createConstantSource();return e.offset.value=0,e.start(),{adsr:e}}),[n]),k=me(t,x),P=ve(d,Object(o.useCallback)((function(e){if(k){var t=He(m)+.01,o=He(E),a=He(T),c=n.currentTime,r=k.adsr.offset;1===e?(r.cancelScheduledValues(c),r.setValueAtTime(r.value,c),r.linearRampToValueAtTime(1,c+t),r.linearRampToValueAtTime(y,c+t+o)):0===e&&(r.cancelScheduledValues(c),r.setValueAtTime(r.value,c),r.linearRampToValueAtTime(0,c+a))}}),[k,m,E,y,T,n.currentTime]));return Object(o.useEffect)((function(){k&&(r(t,{Gate:{connect:s,disconnect:function(){s(null),P&&clearInterval(P)}}}),u(t,{Out:k.adsr}))}),[k,P,r,u,t]),a.a.createElement("div",{style:de.container},a.a.createElement("span",null,"ADSR"),a.a.createElement("div",{style:de.body},"Attack:",a.a.createElement(ee,{min:0,max:1,step:.001,value:m,onChange:function(e){return v(e)},width:30,height:30}),"Decay:",a.a.createElement(ee,{min:0,max:1,step:.001,value:E,onChange:function(e){return h(e)},width:30,height:30}),"Sustain:",a.a.createElement(ee,{min:0,max:1,step:.01,value:y,onChange:function(e){return C(Number(e))},width:30,height:30}),"Release:",a.a.createElement(ee,{min:0,max:1,step:.001,value:T,onChange:function(e){return A(Number(e))},width:30,height:30}),a.a.createElement("div",{style:de.spaceAround},a.a.createElement(Z,{portId:"Gate",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"Out",connections:c,moduleId:t,portType:"output"}))))};Ke.isBrowserSupported="undefined"!==typeof ConstantSourceNode,Ke.panelWidth=6;var Xe=Ke,Je=function(e){var t=e.id,n=e.audioContext,c=be(t),r=X(_),u=X(L),i=Object(o.useCallback)((function(){return{gain:n.createGain()}}),[n]),l=me(t,i);return Object(o.useEffect)((function(){l&&(r(t,{In:{connect:function(e){return e.connect(l.gain)},disconnect:function(e){return e.disconnect(l.gain)}},CV:{connect:function(e){return l.gain.gain.linearRampToValueAtTime(0,n.currentTime+.01),e.connect(l.gain.gain)},disconnect:function(e){l.gain.gain.linearRampToValueAtTime(1,n.currentTime+.01),e.disconnect(l.gain.gain),e.offset&&(e.offset.value=0)}}}),u(t,{Out:l.gain}))}),[l,t,r,u,n]),a.a.createElement("div",{style:de.container},a.a.createElement("span",null,"VCA"),a.a.createElement("div",{style:de.body},a.a.createElement(Z,{portId:"In",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"CV",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"Out",connections:c,moduleId:t,portType:"output"})))};Je.isBrowserSupported="undefined"!==typeof GainNode,Je.panelWidth=4;var Qe=Je,$e=function(e){var t=e.id,n=e.audioContext,c=be(t),r=X(_),u=X(L),i=Object(o.useState)(.5),l=Object(I.a)(i,2),d=l[0],s=l[1],f=Object(o.useState)(.1),p=Object(I.a)(f,2),v=p[0],b=p[1],O=Object(o.useState)(.5),E=Object(I.a)(O,2),h=E[0],j=E[1],g=Object(o.useState)(.5),y=Object(I.a)(g,2),C=y[0],w=y[1],S=Object(o.useCallback)((function(){var e=n.createBiquadFilter(),t=n.createVoltToHzConverter(440,2),o=n.createVoltToHzConverter(440,2),a=n.createVoltToHzConverter(440,2),c=n.createGain(),r=n.createGain();return t.volt.value=0,t.start(),t.connect(e.frequency),o.volt.value=0,o.start(),o.connect(c),c.gain.value=.5,c.connect(e.frequency),a.volt.value=0,a.start(),a.connect(r),r.gain.value=.5,r.connect(e.frequency),e.type="lowpass",e.Q.value=.5,{vcf:e,cv:t,cv2:o,cv3:a,cv2Gain:c,cv3Gain:r}}),[n]),T=me(t,S);Object(o.useEffect)((function(){T&&(window.vcf=T,r(t,{In:{connect:function(e){return e.connect(T.vcf)},disconnect:function(e){return e.disconnect(T.vcf)}},CV1:{connect:function(e){return e.connect(T.cv.volt)},disconnect:function(e){return e.disconnect(T.cv.volt)}},CV2:{connect:function(e){return e.connect(T.cv2.volt)},disconnect:function(e){return e.disconnect(T.cv2.volt)}},CV3:{connect:function(e){return e.connect(T.cv3.volt)},disconnect:function(e){return e.disconnect(T.cv3.volt)}}}),u(t,{Out:T.vcf}))}),[T,t,r,u]),Object(o.useEffect)((function(){if(T){var e=n.sampleRate/2,t=Math.log(e/40)/Math.LN2,o=Math.pow(2,t*(d-1));T.vcf.frequency.setValueAtTime(e*o,n.currentTime)}}),[T,d,n]);var A=Object(o.useCallback)((function(e){s(Number(e))}),[]);Object(o.useEffect)((function(){T&&(T.vcf.Q.value=30*v)}),[T,v]);var x=Object(o.useCallback)((function(e){b(Number(e))}),[]);Object(o.useEffect)((function(){T&&(T.cv2Gain.gain.value=h)}),[T,h]);var k=Object(o.useCallback)((function(e){j(Number(e))}),[]);Object(o.useEffect)((function(){T&&(T.cv3Gain.gain.value=C)}),[T,C]);var P=Object(o.useCallback)((function(e){w(Number(e))}),[]);return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},a.a.createElement("span",{style:{display:"flex",flexDirection:"column"}},"VCF",a.a.createElement("span",{style:{fontSize:10}},"LOW PASS FILTER")),a.a.createElement("div",{style:Object(m.a)({},de.spaceAround,{flex:1})},a.a.createElement("div",{style:Object(m.a)({},de.spaceAround,{flexDirection:"column"})},a.a.createElement(Z,{portId:"CV1",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"CV2",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"CV3",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"In",connections:c,moduleId:t,portType:"input"}),a.a.createElement(Z,{portId:"Out",connections:c,moduleId:t,portType:"output"})),a.a.createElement("div",{style:Object(m.a)({},de.spaceAround,{flexDirection:"column"})},"Frequency",a.a.createElement(ee,{min:0,max:1,step:.01,value:d,width:30,height:30,onChange:function(e){return A(e)}}),"CV 2",a.a.createElement(ee,{min:0,max:1,step:.01,value:h,width:30,height:30,onChange:function(e){return k(e)}}),"CV 3",a.a.createElement(ee,{min:0,max:1,step:.01,value:C,width:30,height:30,onChange:function(e){return P(e)}}),"Res",a.a.createElement(ee,{min:0,max:1,step:.01,value:v,width:30,height:30,onChange:function(e){return x(e)}}))))};$e.isBrowserSupported="undefined"!==typeof BiquadFilterNode,$e.panelWidth=6;var Ze=$e,et=function(e){var t=e.id,n=(e.audioContext,be(t)),c=X(_),r=X(L),u=Object(o.useState)({A:null,B:null}),i=Object(I.a)(u,2),l=i[0],d=i[1],s=Object(o.useCallback)((function(){return{groupA:{input:null,audioNode:null},groupB:{input:null,audioNode:null}}}),[]),f=me(t,s);Object(o.useEffect)((function(){if(f){var e=function(e){for(var t={},n=f["group".concat(e)],o=function(o){t["Group".concat(e).concat(o,"In")]={connect:function(t){d(Object(m.a)({},l,Object(v.a)({},e,o))),n.input=o,n.audioNode=t},disconnect:function(){d(Object(m.a)({},l,Object(v.a)({},e,null))),n.audioNode=null}}},a=1;a<=4;a++)o(a);return t},n=function(e){for(var t={},n=1;n<=4;n++)t["Group".concat(e).concat(n,"Out")]=function(){return f["group".concat(e)].audioNode};return t};c(t,Object(m.a)({},e("A"),{},e("B"))),r(t,Object(m.a)({},n("A"),{},n("B")))}}),[f,t,c,r,l]);var p=Object(o.useCallback)((function(e){for(var o=[],c=1;c<=4;c++){var r=z.a(l[e])||l[e]===c,u={key:"Group".concat(e).concat(c),portId:"Group".concat(e).concat(c).concat(r?"In":"Out"),connections:n,moduleId:t,portType:r?"input":"output",labelPosition:J};o.push(a.a.createElement(Z,u))}return o}),[l,n,t]);return a.a.createElement("div",{style:de.container},a.a.createElement("span",{style:{fontSize:13}},"Multiples"),a.a.createElement("div",{style:de.body},a.a.createElement("div",null,p("A")),a.a.createElement("div",null,p("B"))))};et.isBrowserSupported="undefined"!==typeof ConstantSourceNode,et.panelWidth=3;var tt=et,nt=n(154),ot=n(177),at=n(44),ct=function(e,t){var n=e.createOscillator();return n.type=t,n.frequency.value=0,n},rt="LOW",ut="MEDIUM",it="HIGH",lt=nt.a(O.a),dt=function(e){var t=e.id,c=e.audioContext,r=X(L),u=Object(o.useState)(0),i=Object(I.a)(u,2),l=i[0],d=i[1],s=Object(o.useState)(rt),f=Object(I.a)(s,2),p=f[0],m=f[1],v=Object(o.useCallback)((function(){var e=c.createPulseOscillator();e.frequency.value=0,e.width.value=0;var t={Sawtooth:ct(c,"sawtooth"),RevSawtooth:ct(c,"sine"),Sine:ct(c,"sine"),Triangle:ct(c,"triangle"),Pulse:e},n=c.createPeriodicWave(at.DroppedSaw.real,at.DroppedSaw.imag);t.RevSawtooth.setPeriodicWave(n);var o=c.createConstantSource();return o.offset.value=0,h.a((function(e){return o.connect(e.frequency)}))(t),h.a((function(e){return e.start()}))(t),o.start(),{oscillators:t,frequencyControl:o}}),[c]),b=me(t,v);Object(o.useEffect)((function(){b&&r(t,{Sawtooth:b.oscillators.Sawtooth,RevSawtooth:b.oscillators.RevSawtooth,Sine:b.oscillators.Sine,Triangle:b.oscillators.Triangle,Pulse:b.oscillators.Pulse})}),[b,t,r]),Object(o.useEffect)((function(){if(b){var e;switch(p){case rt:e=4.995*Math.pow(2,l)+.005;break;case ut:e=49.9*Math.pow(2,l)+.1;break;case it:default:e=4490*Math.pow(2,l)+10}b.frequencyControl.offset.value=e}}),[b,l,p]);var O=Object(o.useCallback)((function(e){d(e)}),[]);return a.a.createElement(ue,null,a.a.createElement("span",null,"LFO"),a.a.createElement(ie,{marginTop:15},b&&j.a(g.a,ot.a(4),lt((function(e,n){return a.a.createElement(le,{key:e,column:1,row:n+1},a.a.createElement(Z,{label:"",portId:e,moduleId:t,portType:"output"}))})))(b.oscillators),a.a.createElement(le,{column:1,row:5},a.a.createElement(Z,{portId:"Pulse",moduleId:t,portType:"output",label:a.a.createElement("img",{width:25,src:n(50),alt:"Pulse"}),labelPosition:$})),b&&j.a(g.a,ot.a(4),lt((function(e,t){return a.a.createElement(le,{key:e,column:2,row:t+1},a.a.createElement("img",{width:25,src:n(49)("./".concat(e.toLowerCase(),".svg")),alt:e}))})))(b.oscillators),a.a.createElement(le,{column:2,row:5},a.a.createElement(ee,{label:"Frequ.",min:-4,max:4,step:.001,value:l,width:30,height:30,onChange:O})),a.a.createElement(le,{column:"1/3",row:6},a.a.createElement(Fe,{value:p,onChange:m,options:[{value:rt,label:"L"},{value:ut,label:"M"},{value:it,label:"H"}]}),"Frequ.",a.a.createElement("br",null),"Range")))};dt.isBrowserSupported="undefined"!==typeof OscillatorNode&&"undefined"!==typeof ConstantSourceNode,dt.panelWidth=6;for(var st,ft,pt,mt=dt,vt={VCO:"VCO",STEREO_AUDIO_INTERFACE:"STEREO_AUDIO_INTERFACE",MONO_AUDIO_INTERFACE:"MONO_AUDIO_INTERFACE",KEYBOARD:"KEYBOARD",ADSR:"ADSR",VCA:"VCA",VCF_LOW_PASS:"VCF_LOW_ASS",MULTIPLES:"MULTIPLES",LFO:"LFO"},bt=O.a(E.a(1))(vt),Ot=n(155),Et=n(156),It=n(157),ht=n(168),jt=n(169),gt=n(158),yt=n(159),Ct=n(64),wt=n(65),St=n(63),Tt=n(160),At=n(161),xt=n(62),kt=n(178),Pt=n(162),Mt=n(163),Dt=n(60),Rt=Ot.a((function(e,t){var n=e.moduleId,o=e.portId;return Et.a(It.a(ht.a(z.a),[n,o]),j.a(C.a([n,o]),(function(e){return jt.a([e.moduleId,e.portId],t)})))(t)})),_t=Object(b.a)((st={},Object(v.a)(st,"ADD_MODULE",(function(e,t){var n=t.moduleType,o=t.id,a=t.rackId,c=void 0===a?0:a,r=function(e){var t=e.type,n=e.id,o={id:(void 0===n?void 0:n)||"".concat(t).concat(bt[t])};switch(t){case vt.VCO:o.Module=Ie;break;case vt.STEREO_AUDIO_INTERFACE:o.Module=je;break;case vt.MONO_AUDIO_INTERFACE:o.Module=ye;break;case vt.KEYBOARD:o.Module=Ye;break;case vt.ADSR:o.Module=Xe;break;case vt.VCF_LOW_PASS:o.Module=Ze;break;case vt.VCA:o.Module=Qe;break;case vt.MULTIPLES:o.Module=tt;break;case vt.LFO:o.Module=mt;break;default:throw new Error("Cannot create module of type: ".concat(t))}return o.Module.isBrowserSupported?(o.width=20*o.Module.panelWidth,bt[t]++,o):null}({type:n,id:o});return r?(r.left=e.maxLeft,gt.a({audioContextInitiliazed:yt.a,modules:Ct.a(r.id,r),connections:Ct.a(r.id,{}),maxLeft:wt.a(r.width),racks:St.a(c,Tt.a(r.id))})(e)):(window.alert("Your browser doesn't support this module: ".concat(n)),e)})),Object(v.a)(st,"REGISTER_INPUTS",(function(e,t){var n=t.id,o=t.inputs;return gt.a({modules:gt.a(Object(v.a)({},n,Ct.a("inputs",o)))})(e)})),Object(v.a)(st,"REGISTER_OUTPUTS",(function(e,t){var n=t.id,o=t.outputs;return gt.a({modules:gt.a(Object(v.a)({},n,(function(e){return At.a((function(e,t){"function"===typeof e&&Object.defineProperty(o,t,{get:e})}))(o),Object(m.a)({},e,{outputs:o})})))})(e)})),Object(v.a)(st,"CONNECT_MODULES",(function(e,t){var n,o=t.input,a=t.output;return gt.a({connections:j.a(Rt(a),Rt(o),gt.a((n={},Object(v.a)(n,o.moduleId,Ct.a(o.portId,{moduleId:a.moduleId,portId:a.portId,counter:0})),Object(v.a)(n,a.moduleId,Ct.a(a.portId,{moduleId:o.moduleId,portId:o.portId,counter:0})),n)))})(e)})),Object(v.a)(st,"DISCONNECT_MODULE",(function(e,t){var n=t.port;return gt.a({connections:j.a(Rt(n),gt.a(Object(v.a)({},n.moduleId,xt.a(n.portId))))})(e)})),Object(v.a)(st,"SET_STARTING_PORT",(function(e,t){var n=t.port;return gt.a({startingPort:E.a(n)})(e)})),Object(v.a)(st,"UNSET_STARTING_PORT",(function(e){return gt.a({startingPort:E.a(null)})(e)})),Object(v.a)(st,"MOVE_MODULE",(function(e,t){var n=t.moduleId,o=t.x,a=t.rackId,c=e.modules[n].left,r=e.modules[n].width,u=c+20*Math.floor((o-c)/20),i=u+r;return i>window.innerWidth||j.a(G.a,kt.a((function(t){var o=t.id,c=t.left,r=c+t.width;return o!==n&&Pt.a(o,e.racks[a])&&(c>=u&&c<i||c<u&&r>u||c===u&&r===i)})))(e.modules)?e:gt.a({modules:Object(v.a)({},n,{left:E.a(u)}),connections:Object(v.a)({},n,O.a(gt.a({counter:Mt.a}))),racks:function(e){var t=we.a(Pt.a(n),e);return t===a?e:j.a(St.a(t,fe.a([n])),St.a(a,Tt.a(n)))(e)},maxLeft:Dt.a(u+e.modules[n].width)})(e)})),Object(v.a)(st,"REMOVE_MODULE",(function(e,t){var n=t.moduleId,o=e.modules[n];return gt.a({modules:xt.a(n),racks:function(e){var t=we.a(Pt.a(n),e);return St.a(t,fe.a([n]))(e)},maxLeft:function(e){return o.left+o.width===e?o.left:e}})(e)})),st),{audioContextInitiliazed:!1,modules:{},connections:{},startingPort:null,maxLeft:20,racks:[[],[]]}),Lt=n(179),Vt=n(164),Nt=n(71),Bt=Object(b.a)((ft={},Object(v.a)(ft,"ADD_CABLE",(function(e,t){var n=t.portId,o=t.fromPoint,a=t.color;return gt.a({cables:Ct.a(n,{portId:n,fromPoint:o,toPoint:o,color:a})})(e)})),Object(v.a)(ft,"MODIFY_CABLE",(function(e,t){var n=t.portId,o=t.fromPoint,a=t.toPoint,c=t.toPortId;return gt.a({cables:gt.a(Object(v.a)({},n,Lt.a(Vt.a,Nt.a(z.a,{fromPoint:o,toPoint:a,toPortId:c}))))})(e)})),Object(v.a)(ft,"REMOVE_CABLE",(function(e,t){var n=t.portId;return gt.a({cables:xt.a(n)})(e)})),Object(v.a)(ft,"CHANGE_OVER_PORT",(function(e,t){var n=t.portId;return Object(m.a)({},e,{overPort:n})})),ft),{cables:{},overPort:null}),Ft=function(e){return function(t){return Object(m.a)({},t,{isDirty:e})}},Gt=Object(b.a)((pt={},Object(v.a)(pt,"LOAD_PRESET_START",(function(e){return Object(m.a)({},e,{presetLoading:!0})})),Object(v.a)(pt,"LOAD_PRESET_FINISH",(function(e){return Object(m.a)({},Ft(!1)(e),{presetLoading:!1})})),Object(v.a)(pt,"REMOVE_MODULE",Ft(!0)),Object(v.a)(pt,"ADD_MODULE",Ft(!0)),Object(v.a)(pt,"REMOVE_CABLE",Ft(!0)),Object(v.a)(pt,"ADD_CABLE",Ft(!0)),pt),{presetLoading:!1,isDirty:!1}),Ut=Object(f.c)({modules:_t,cables:Bt,rack:Gt}),Wt=n(165),zt=function(e){var t=e.getState;return function(e){return function(n){switch(n.type){case"CONNECT_MODULES":var o=t().modules,a=o.modules,c=o.connections,r=C.a([n.input.moduleId,"inputs",n.input.portId])(a),u=C.a([n.output.moduleId,"outputs",n.output.portId])(a);j.a(C.a([n.output.moduleId,n.output.portId]),Wt.a(z.a,j.a((function(e){var t=e.moduleId,n=e.portId;return C.a([t,"inputs",n])(a)}),(function(e){return e.disconnect(u)}))))(c),j.a(C.a([n.input.moduleId,n.input.portId]),Wt.a(z.a,j.a((function(e){var t=e.moduleId,n=e.portId;return C.a([t,"outputs",n])(a)}),(function(e){return r.disconnect(e)}))))(c),r&&u&&r.connect(u);break;case"DISCONNECT_MODULE":var i=t().modules,l=i.modules,d=i.connections,s=C.a([n.port.moduleId,"inputs",n.port.portId])(l);if(s)j.a(C.a([n.port.moduleId,n.port.portId]),(function(e){var t=e.moduleId,n=e.portId;return C.a([t,"outputs",n])(l)}),(function(e){return s.disconnect(e)}))(d);else{var f=C.a([n.port.moduleId,"outputs",n.port.portId])(l);j.a(C.a([n.port.moduleId,n.port.portId]),(function(e){var t=e.moduleId,n=e.portId;return C.a([t,"inputs",n])(l)}),(function(e){return e.disconnect(f)}))(d)}}return e(n)}}},qt=[p.a,zt],Yt=Object(f.d)(Ut,f.a.apply(void 0,qt)),Ht=function(){var e=X(M);return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e(vt.KEYBOARD)}},"Add Keyboard"),a.a.createElement("button",{onClick:function(){return e(vt.VCO)}},"Add VCO"),a.a.createElement("button",{onClick:function(){return e(vt.VCA)}},"Add VCA"),a.a.createElement("button",{onClick:function(){return e(vt.ADSR)}},"Add ADSR"),a.a.createElement("button",{onClick:function(){return e(vt.VCF_LOW_PASS)}},"Add VCF Low Pass"),a.a.createElement("button",{onClick:function(){return e(vt.LFO)}},"Add LFO"),a.a.createElement("button",{onClick:function(){return e(vt.STEREO_AUDIO_INTERFACE)}},"Add Stereo Audio Interface"),a.a.createElement("button",{onClick:function(){return e(vt.MONO_AUDIO_INTERFACE)}},"Add Mono Audio Interface"),a.a.createElement("button",{onClick:function(){return e(vt.MULTIPLES)}},"Add Multiples"))},Kt=function(e,t){var n=e.y>t.y?e:t,o=e.y<t.y?e:t,a=.1*Math.abs(t.x-e.x)+Math.abs(e.y-t.y)/.4,c=.5+Math.log(1+Math.abs((t.y-e.y)/(t.x-e.x)))/(3*Math.log(2));c=n.x<o.x?1-c:c;var r=(e.x<t.x?1:-1)*c*Math.abs(e.x-t.x)||e.x;return"".concat(r," ").concat(a)},Xt=function(e){var t=e.fromPoint,n=e.toPoint,o=e.color,c=e.overPort,r=e.portId,u=e.toPortId;return a.a.createElement("path",{d:"M".concat(t.x," ").concat(t.y," q ").concat(Kt(t,n)," ").concat(n.x-t.x," ").concat(n.y-t.y),opacity:c===r||c===u?.9:.6,stroke:o,fill:"transparent",strokeWidth:6})},Jt=function(e){var t=e.scrollLeft,n=e.height,o=e.scrollTop,c=Object(s.c)(j.a(C.a(["cables","cables"]),G.a)),r=Object(s.c)(C.a(["cables","overPort"]));return a.a.createElement("svg",{style:{position:"fixed",left:-t,top:-o,width:"calc(100% + ".concat(t,"px)"),height:n,pointerEvents:"none"}},c.map((function(e){return a.a.createElement(Xt,Object.assign({key:e.portId},e,{overPort:r}))})))},Qt={Basic:{modules:[{type:vt.KEYBOARD,id:"KEYBOARD1"},{type:vt.VCO,id:"VCO1"},{type:vt.VCF_LOW_PASS,id:"VCF1"},{type:vt.ADSR,id:"ADSR1"},{type:vt.VCA,id:"VCA1"},{type:vt.MONO_AUDIO_INTERFACE,id:"MONO_AUDIO_INTERFACE1"}],connections:[{input:{moduleId:"VCO1",portId:"V/Oct"},output:{moduleId:"KEYBOARD1",portId:"CV"}},{input:{moduleId:"VCF1",portId:"In"},output:{moduleId:"VCO1",portId:"Sine"}},{input:{moduleId:"ADSR1",portId:"Gate"},output:{moduleId:"KEYBOARD1",portId:"Gate"}},{input:{moduleId:"VCA1",portId:"In"},output:{moduleId:"VCF1",portId:"Out"}},{input:{moduleId:"VCA1",portId:"CV"},output:{moduleId:"ADSR1",portId:"Out"}},{input:{moduleId:"MONO_AUDIO_INTERFACE1",portId:"In"},output:{moduleId:"VCA1",portId:"Out"}}]}},$t=n(180),Zt=n(181),en=n(182),tn=Ot.a((function(e,t){var n=t.input,o=t.output;e(D(t));var a="".concat(n.moduleId,"-").concat(n.portId),c=document.getElementById(a).getBoundingClientRect();e(A({portId:a,color:K()({luminosity:"dark"}),fromPoint:{x:c.x+c.width/2,y:c.y+c.height/2}}));var r=document.getElementById("".concat(o.moduleId,"-").concat(o.portId)).getBoundingClientRect();e(x({portId:a,toPortId:"".concat(o.moduleId,"-").concat(o.portId),toPoint:{x:r.x+r.width/2,y:r.y+r.height/2}}))})),nn=function(e){return function(t,n){t({type:"LOAD_PRESET_START"}),t((function(e,t){j.a(g.a,O.a((function(t){return e(F(t))})))(t().modules.modules),e({type:"REMOVE_ALL_MODULES"})})),setTimeout(on(t,n,e),10)}},on=function e(t,n,o){return function(){$t.a(n().modules.modules)?(w.a((function(e){return t(M(e.type,e.id))}))(o.modules),setTimeout(an(t,n,o),10)):setTimeout(e(t,n,o),10)}},an=function e(t,n,o){return function(){var a=O.a(oe.a("id"),n().modules.modules),c=O.a(oe.a("id"),o.modules);$t.a(Zt.a(a,c))?(w.a(tn(t))(o.connections),setTimeout(cn(t,n,o.connections),50)):setTimeout(e(t,n,o),10)}},cn=function e(t,n,o){return function(){var a=n().modules.connections;en.a((function(e){var t=a[e.input.moduleId];if(!t)return!1;var n=t[e.input.portId];return n&&n.moduleId===e.output.moduleId&&n.portId===e.output.portId}),o)?t({type:"LOAD_PRESET_FINISH"}):setTimeout(e(t,n,o),10)}},rn=function(){var e=Object(s.c)(C.a(["rack","isDirty"])),t=Object(s.c)(C.a(["rack","presetLoading"])),n=X(nn),c=Object(o.useState)(""),r=Object(I.a)(c,2),u=r[0],i=r[1];Object(o.useEffect)((function(){!t&&e&&i("")}),[e,t]);var l=Object(o.useCallback)((function(e){var t=e.target.value;i(t),n(Qt[t])}),[n]);return a.a.createElement("div",null,a.a.createElement("select",{value:u,onChange:l},""===u&&a.a.createElement("option",{value:""},"Select Preset"),j.a(g.a,O.a((function(e){return a.a.createElement("option",{key:e,value:e},e)})))(Qt)))},un=(n(141),n(66)),ln=(n(144),function(){return a.a.createElement("img",{alt:"screw",src:n(145),height:14,width:14,style:{margin:5}})}),dn=function(e){var t=e.children;return a.a.createElement("div",{className:"panel_edge"},a.a.createElement(ln,null),t,a.a.createElement(ln,null))},sn=function(e){var t=e.children,n=e.dragging,o=e.setDragging,c=e.width,r=e.left,u=e.moduleId,i=X(F);return a.a.createElement("div",{className:"module-panel",style:{width:c,left:r,cursor:n?"grabbing":"grab"},onMouseDown:function(){return o(!0)},onMouseUp:function(){return o(!1)}},a.a.createElement(dn,null,a.a.createElement("span",{onClick:function(){return i(u)},className:"btn_delete_module"},a.a.createElement(un.a,{size:"xs",icon:"trash"}))),a.a.createElement("div",{className:"panel_content"},t),a.a.createElement(dn,null))},fn=new Float32Array(256),pn=0;pn<128;pn++)fn[pn]=-1,fn[pn+128]=1;var mn=new Float32Array(2);function vn(){var e=this.createOscillator();e.type="sawtooth";var t=this.createWaveShaper();t.curve=fn,e.connect(t);var n=this.createGain();n.gain.value=0,e.width=n.gain,e.widthGain=n,n.connect(t);var o=this.createWaveShaper();return o.curve=mn,e.connect(o),o.connect(n),e.connect=function(){return t.connect.apply(t,arguments),e},e.disconnect=function(){return t.disconnect.apply(t,arguments),e},e}mn[0]=1,mn[1]=1;var bn=n(166),On=n(183),En=Object(bn.a)(On.a,(function(e,t){for(var n=new Float32Array(8192),o=0;o<8192;o++){var a=o/8191*4-2;n[o]=e*Math.pow(t,a)}return n}));function In(e,t){var n=this.createConstantSource();n.volt=n.offset;var o=this.createWaveShaper(),a=this.createGain();return o.curve=En(e,t),a.gain.value=1/t,n.connect(a).connect(o),n.connect=function(){return o.connect.apply(o,arguments),a},n.disconnect=function(){return o.disconnect.apply(o,arguments),a},n}var hn=function(){var e=Object(s.c)(C.a(["modules","modules"])),t=Object(s.c)(C.a(["modules","racks"])),n=Object(s.c)(C.a(["modules","startingPort"])),c=Object(s.c)(C.a(["modules","audioContextInitiliazed"])),r=X(N),u=X(B),i=X(x),l=X(k),d=Object(o.useState)(null),f=Object(I.a)(d,2),p=f[0],m=f[1],v=Object(o.useState)(0),b=Object(I.a)(v,2),O=b[0],E=b[1],h=Object(o.useState)(0),j=Object(I.a)(h,2),g=j[0],y=j[1],w=Object(o.useState)(0),S=Object(I.a)(w,2),T=S[0],A=S[1],P=Object(o.useState)(null),M=Object(I.a)(P,2),D=M[0],R=M[1];Object(o.useEffect)((function(){window.onscroll=function(e){return y(window.scrollY)}}),[]),Object(o.useEffect)((function(){if(!D){var e=new(window.AudioContext||window.webkitAudioContext);e.createPulseOscillator=vn,e.createVoltToHzConverter=In,R(e)}}),[D,c]);var _=Object(o.useCallback)((function(e){n&&i({portId:"".concat(n.moduleId,"-").concat(n.portId),toPoint:{x:e.clientX,y:e.clientY+g}})}),[i,n,g]),L=Object(o.useCallback)((function(e){p&&u(p,e.clientX,T)}),[p,u,T]),V=Object(o.useCallback)((function(){n&&(l("".concat(n.moduleId,"-").concat(n.portId)),r())}),[r,l,n]),F=Object(o.useCallback)((function(e){_(e),L(e)}),[_,L]),G=Object(o.useCallback)((function(e){return function(t){m(t?e:null)}}),[]),U=Object(o.useCallback)((function(e){E(e.target.scrollLeft)}),[]);return a.a.createElement("div",{onMouseUp:V,onMouseMove:F,onScroll:U},a.a.createElement(Ht,null),a.a.createElement(rn,null),a.a.createElement("div",null,a.a.createElement("div",{style:{overflowX:"scroll"}},t.map((function(t,n){return a.a.createElement("div",{key:n,className:"rack",style:{width:"calc(100% + ".concat(O,"px)")},onMouseEnter:function(){return A(n)}},D&&t.map((function(t){var o=e[t],c=o.Module,r=o.width,u=o.left;return a.a.createElement(sn,{key:t,rackId:n,moduleId:t,setDragging:G(t),dragging:t===p,width:r,left:u},a.a.createElement(c,{id:t,audioContext:D}))})))}))),a.a.createElement(Jt,{scrollLeft:O,scrollTop:g,height:1.5*t.length*370})))},jn=n(32),gn=n(67);n(146);jn.b.add(gn.a);var yn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return a.a.createElement(s.a,{store:Yt},a.a.createElement("div",{className:"App"},a.a.createElement(hn,null)))}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(yn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},49:function(e,t,n){var o={"./pulse.svg":50,"./revsawtooth.svg":86,"./sawtooth.svg":87,"./sine.svg":88,"./triangle.svg":89};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=c,e.exports=a,a.id=49},50:function(e,t,n){e.exports=n.p+"static/media/pulse.f9689bc2.svg"},72:function(e,t,n){e.exports=n(147)},77:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){e.exports=n.p+"static/media/port.1b33f6c1.svg"},85:function(e,t,n){e.exports=n.p+"static/media/knob.23f417df.svg"},86:function(e,t,n){e.exports=n.p+"static/media/revsawtooth.e22804aa.svg"},87:function(e,t,n){e.exports=n.p+"static/media/sawtooth.de511017.svg"},88:function(e,t,n){e.exports=n.p+"static/media/sine.e1994103.svg"},89:function(e,t,n){e.exports=n.p+"static/media/triangle.87d20148.svg"}},[[72,1,2]]]);
//# sourceMappingURL=main.f506eaca.chunk.js.map